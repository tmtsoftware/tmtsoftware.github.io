<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>Error Handling Â· TMT JavaScript/Typescript Library</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="TMT JavaScript/Typescript Library" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT JavaScript/Typescript Library
</span>
<span class="md-header-nav__topic">
Error Handling
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="TMT JavaScript/Typescript Library" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="TMT JavaScript/Typescript Library">
TMT JavaScript/Typescript Library
</a>
</label>
<ul>
  <li><a href="../common/getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../services/index.html" class="page">Services</a>
  <ul>
    <li><a href="../services/admin-service.html" class="page">Admin Service</a></li>
    <li><a href="../services/alarm-service.html" class="page">Alarm Service</a></li>
    <li><a href="../services/command-service.html" class="page">Command Service</a></li>
    <li><a href="../services/config-service.html" class="page">Config Service</a></li>
    <li><a href="../services/event-service.html" class="page">Event Service</a></li>
    <li><a href="../services/location-service.html" class="page">Location Service</a></li>
    <li><a href="../services/logging-service.html" class="page">Logging Service</a></li>
    <li><a href="../services/sequencer-service.html" class="page">Sequencer Service</a></li>
  </ul></li>
  <li><a href="../params/index.html" class="page">Params</a>
  <ul>
    <li><a href="../params/commands.html" class="page">Commands</a></li>
    <li><a href="../params/events.html" class="page">Events</a></li>
    <li><a href="../params/keys-and-parameters.html" class="page">Keys and Parameters</a></li>
    <li><a href="../params/result.html" class="page">Result</a></li>
    <li><a href="../params/subsystem.html" class="page">Subsystem</a></li>
    <li><a href="../params/state-variables.html" class="page">State variables</a></li>
    <li><a href="../params/units.html" class="page">Units</a></li>
  </ul></li>
  <li><a href="../aas/csw-aas-js.html" class="page">Javascript Adapter (csw-aas-js)</a></li>
  <li><a href="../common/contract.html" class="page">Service Contract</a></li>
  <li><a href="../common/response-handling.html" class="page">Response Handling</a></li>
  <li><a href="../common/error-handling.html" class="active page">Error Handling</a></li>
  <li><a href="../technical/index.html" class="page">Technical Design Documentation</a>
  <ul>
    <li><a href="../services/agent-service.html" class="page">Agent Service</a></li>
    <li><a href="../services/sequence-manager-service.html" class="page">Sequence Manager Service</a></li>
    <li><a href="../technical/csw-aas-js.html" class="page">csw-aas-js - Javascript adapter</a></li>
  </ul></li>
  <li><a href="../common/ts-docs.html" class="page">Type Definations</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../common/error-handling.html#error-handling" class="header">Error Handling</a>
  <ul>
    <li><a href="../common/error-handling.html#error-types" class="header">Error Types</a></li>
    <li><a href="../common/error-handling.html#handling-error-pattern" class="header">Handling Error pattern</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1.0*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../common/error-handling.html#error-handling" class="header">Error Handling</a>
  <ul>
    <li><a href="../common/error-handling.html#error-types" class="header">Error Types</a></li>
    <li><a href="../common/error-handling.html#handling-error-pattern" class="header">Handling Error pattern</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#error-handling" name="error-handling" class="anchor"><span class="anchor-link"></span></a>Error Handling</h1>
<p>Most of the errors received from backend will be contained a defined shape ( <a href="https://tmtsoftware.github.io/esw-ts/0.1.0-SNAPSHOT/ts-docs/classes/models.serviceerror.html">Service error</a>) that helps developer to build application based on the defined fields rather than depending on base browser&rsquo;s Error type. Service&rsquo;s api calls will be returning promise based results and network calls may go wrong for many reasons like server not found, some invalid configuration while setting up application, etc. all these cases are supposed to be handled at some places. For ex: some errors can be silently logged and redirect user to error page. At application level, error/exceptions must be handled in application code because that will help user to make further decisions. In TMT Arhcitecture, <a href="https://tmtsoftware.github.io/esw-ts/0.1.0-SNAPSHOT/ts-docs/classes/models.serviceerror.html">Service error</a> captures all/most of the application level errors/exceptions.</p>
<p>To read more on exception handling, refer this <a href="https://www.sitepoint.com/exceptional-exception-handling-in-javascript/">document</a> which gives detailed explanation.</p>
<h2><a href="#error-types" name="error-types" class="anchor"><span class="anchor-link"></span></a>Error Types</h2>
<h3><a href="#service-error" name="service-error" class="anchor"><span class="anchor-link"></span></a>Service Error</h3>
<pre><code>TODO explaination
</code></pre>
<p>Type defination for Service Error <a href="https://tmtsoftware.github.io/esw-ts/0.1.0-SNAPSHOT/ts-docs/classes/models.serviceerror.html">here</a></p>
<h3><a href="#client-side-error" name="client-side-error" class="anchor"><span class="anchor-link"></span></a>Client Side Error</h3>
<pre><code>TODO explaination
</code></pre>
<h2><a href="#handling-error-pattern" name="handling-error-pattern" class="anchor"><span class="anchor-link"></span></a>Handling Error pattern</h2>
<p>The following examples shows how to call AgentService api&rsquo;s and handle the response <code>SpawnResponse</code> and <code>KillResponse</code>.</p>
<p>This example also illustrates error handling of service specific exception <code>AgentNotFoundException</code> along with the generic errors like <code>TransportError</code> and <code>ArithmeticException</code> will look like.</p><div class="callout warning "><div class="callout-title">Exploiting try-catch is an anti-pattern</div>
<p>The example uses <code>try-catch</code> to handle errors and exceptions. Generally those errors/exceptions are handled at UI framework level on boundaries of service calls. This example will be updated once we have frontend framework setup in place.</p></div>
<p>A function whose responsibility is to handle errors &amp; exceptions</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/documentation/agent/AgentServiceExamples.ts#L48-L79" target="_blank" title="Go to snippet source"></a><code class="language-ts">// common function to handle error scenario&#39;s
const handleError = (err: Error) =&gt; {
  if (err instanceof ServiceError) {
    // depending on use case, error can be handled on following fields
    //  - err.status      (5XX, 4XX, 3XX)
    //  - err.errorType   (AgentNotFoundException, TransportError, ArithmeticException, NullPointerException, etc)

    // Other fields present in error model
    // err.message : contains the reason which can be used to show on UI
    // err.statusText :  Forbidden , Unauthorised, BadRequest, Not Found, etc.

    switch (err.errorType) {
      case &#39;AgentNotFoundException&#39;:
        console.log(err.message) // Location not found for $agentPrefix
        console.log(&#39;do something on getting AgentNotFoundException&#39;)
        break
      case &#39;TransportError&#39;:
        console.log(err.statusText)
        console.log(&#39;do something on getting TransportError (4XX, 3XX, etc))&#39;)
        break
      case &#39;ArithmeticException&#39;:
        console.log(err.statusText) // InternalServerError
        console.log(err.message) // Reason : / by zero
        break
      default:
        throw Error(err.message)
    }
  } else {
    // client side error occurred at validations and operations before making api call to the server
    // for ex: Prefix can throw runtime error if componentName is invalid.
  }
}</code></pre></dd>
</dl>
<p>Example for spawnSequenceManager api with error handling looks like following:</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/documentation/agent/AgentServiceExamples.ts#L84-L108" target="_blank" title="Go to snippet source"></a><code class="language-ts">// setup
const agentPrefix = new Prefix(&#39;ESW&#39;, &#39;agent1&#39;)
const obsModeConfigPath = &#39;/obs-mode.conf&#39;
const sequenceManagerVersion = &#39;1.0.0&#39;

try {
  const spawnResponse: SpawnResponse = await agentService.spawnSequenceManager(
    agentPrefix,
    obsModeConfigPath,
    false,
    sequenceManagerVersion
  )

  // spawn response handling (200 status code)
  switch (spawnResponse._type) {
    case &#39;Spawned&#39;:
      // do something on successful spawn operation
      break
    case &#39;Failed&#39;:
      // do something on failed response
      break
  }
} catch (err) {
  handleError(err)
}</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw-ts/tree/master/docs/src/main/common/error-handling.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.0*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../common/response-handling.html" title="Response Handling" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Response Handling
</span>
</div>
</a>
<a href="../technical/index.html" title="Technical Design Documentation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Technical Design Documentation
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
