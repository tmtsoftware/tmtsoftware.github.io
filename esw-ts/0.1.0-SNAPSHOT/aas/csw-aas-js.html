<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>Javascript Adapter (csw-aas-js) · TMT JavaScript/Typescript Library</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="TMT JavaScript/Typescript Library" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT JavaScript/Typescript Library
</span>
<span class="md-header-nav__topic">
Javascript Adapter (csw-aas-js)
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="TMT JavaScript/Typescript Library" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="TMT JavaScript/Typescript Library">
TMT JavaScript/Typescript Library
</a>
</label>
<ul>
  <li><a href="../clients/index.html" class="page">Clients</a>
  <ul>
    <li><a href="../clients/admin/admin-service.html" class="page">Admin Service</a></li>
    <li><a href="../clients/agent/agent-service.html" class="page">Agent Service</a></li>
    <li><a href="../clients/command/command-service.html" class="page">Command Service</a></li>
    <li><a href="../clients/config/config-service.html" class="page">Config Service</a></li>
    <li><a href="../clients/event/event-service.html" class="page">Event Service</a></li>
    <li><a href="../clients/location/location-service.html" class="page">Location Service</a></li>
    <li><a href="../clients/sequencer/sequencer-service.html" class="page">Sequencer Service</a></li>
  </ul></li>
  <li><a href="../params/index.html" class="page">Params</a>
  <ul>
    <li><a href="../params/commands.html" class="page">Commands</a></li>
    <li><a href="../params/events.html" class="page">Events</a></li>
    <li><a href="../params/keys-and-parameters.html" class="page">Keys and Parameters</a></li>
    <li><a href="../params/result.html" class="page">Result</a></li>
    <li><a href="../params/subsystem.html" class="page">Subsystem</a></li>
    <li><a href="../params/state-variables.html" class="page">State variables</a></li>
    <li><a href="../params/units.html" class="page">Units</a></li>
  </ul></li>
  <li><a href="../aas/csw-aas-js.html" class="active page">Javascript Adapter (csw-aas-js)</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../aas/csw-aas-js.html#javascript-adapter-csw-aas-js-" class="header">Javascript Adapter (csw-aas-js)</a>
  <ul>
    <li><a href="../aas/csw-aas-js.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="../aas/csw-aas-js.html#application-configuration" class="header">Application Configuration</a></li>
    <li><a href="../aas/csw-aas-js.html#components" class="header">Components</a></li>
    <li><a href="../aas/csw-aas-js.html#technical-description" class="header">Technical Description</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1.0*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../aas/csw-aas-js.html#javascript-adapter-csw-aas-js-" class="header">Javascript Adapter (csw-aas-js)</a>
  <ul>
    <li><a href="../aas/csw-aas-js.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="../aas/csw-aas-js.html#application-configuration" class="header">Application Configuration</a></li>
    <li><a href="../aas/csw-aas-js.html#components" class="header">Components</a></li>
    <li><a href="../aas/csw-aas-js.html#technical-description" class="header">Technical Description</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#javascript-adapter-csw-aas-js-" name="javascript-adapter-csw-aas-js-" class="anchor"><span class="anchor-link"></span></a>Javascript Adapter (csw-aas-js)</h1>
<p><code>csw-aas-js</code> is an npm package which provides React components that integrate with the CSW Authentication and Authorization Service. UI applications can use these React components to enable the application to show or hide components based on the authentication and authorization policy. <code>csw-aas-js</code> is written in typescript and it bundles transpiled es6 module along with type declarations.</p>
<!-- introduction to the javascript adapter -->
<h2><a href="#dependencies" name="dependencies" class="anchor"><span class="anchor-link"></span></a>Dependencies</h2>
<p>To use the <code>esw-ts</code> adapter, run this command from root folder of your application where <code>package.json</code> exists:</p>
<dl>
  <dt>npm</dt>
  <dd>
  <pre class="prettyprint"><code class="language-javascript">    npm i --save esw-ts@0.1.0-SNAPSHOT
</code></pre></dd>
  <dt>yarn</dt>
  <dd>
  <pre class="prettyprint"><code class="language-javascript">    yarn add esw-ts@0.1.0-SNAPSHOT
</code></pre></dd>
</dl>
<h2><a href="#application-configuration" name="application-configuration" class="anchor"><span class="anchor-link"></span></a>Application Configuration</h2>
<p>Web application needs following configurations in order to get access token from keycloak server. This application specific config object should be passed in AuthContextProvider component. There are two configurations needed for a web application i.e. <code>realm</code>, <code>clientId</code></p>
<p><code>realm</code> is a mandatory configuration which specified in keycloak server under which client for your application is registered.</p>
<p><code>clientId</code> is a mandatory configuration which specifies the client id of the app as per registration in keycloak server.</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/config/AppConfig.ts#L2-L6" target="_blank" title="Go to snippet source"></a><code class="language-ts">export const AppConfig = {
  realm: &#39;TMT&#39;,
  clientId: &#39;tmt-frontend-app&#39;,
  applicationName: &#39;test-app&#39;
}</code></pre></dd>
</dl>
<h2><a href="#components" name="components" class="anchor"><span class="anchor-link"></span></a>Components</h2>
<p><code>esw-ts</code> exposes the following React components.</p>
<ul>
  <li><a href="#AuthContextProvider">AuthContextProvider</a></li>
  <li><a href="#consumer">Consumer</a></li>
  <li><a href="#login">Login</a></li>
  <li><a href="#logout">Logout</a></li>
  <li><a href="#checklogin">CheckLogin</a></li>
  <li><a href="#realmrole">RealmRole</a></li>
</ul>
<p>Components can be imported as shown in code snippet below</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/NavComponent.tsx#L4" target="_blank" title="Go to snippet source"></a><code class="language-tsx">import { AuthContext, Logout, Login } from &#39;esw-ts&#39;</code></pre></dd>
</dl>
<h3><a href="#authcontextprovider" name="authcontextprovider" class="anchor"><span class="anchor-link"></span></a>AuthContextProvider</h3>
<p><code>AuthContextProvider</code> is wrapper over a React <a href="https://reactjs.org/docs/context.html#contextprovider">Context.Provider</a>. A JSON configuration file must be passed in that contains the application specific AAS server configuration (e.g. clientId, realm). When a user logs in, an AAS Server is instantiated, with the UI application specific configuration overriding the predefined configuration. Once the AAS sever is instantiated, an <code>auth</code> object is created with the needed attributes and APIs. This <code>auth</code> object is available to other React components; since <code>AuthContextProvider</code> is a <code>Provider</code>, its data can be shared with any of the children React components in its tree in a <code>Consumer</code> component (see below). All <code>Consumer</code>s that are descendants of a <code>Provider</code> will re-render whenever the AuthContextProvider’s state changes, e.g. a user authorizes. It is recommended to use <code>AuthContextProvider</code> to wrap the entire application so that data can be shared anywhere in application via a <code>Consumer</code>.</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/ExampleApp.tsx#L19-L74" target="_blank" title="Go to snippet source"></a><code class="language-tsx">&lt;AuthContextProvider config={AppConfig}&gt;
  &lt;BrowserRouter&gt;
    &lt;div&gt;
      &lt;NavComponent /&gt;
      &lt;Route
        exact
        path=&#39;/secured&#39;
        render={(_) =&gt; (
          &lt;CheckLogin error={&lt;LoginError /&gt;}&gt;
            &lt;Write /&gt;
          &lt;/CheckLogin&gt;
        )}
      /&gt;
      &lt;Route exact path=&#39;/config&#39; render={(_) =&gt; &lt;ConfigApp /&gt;} /&gt;
      &lt;Route
        exact
        path=&#39;/example_admin&#39;
        render={(_) =&gt; (
          &lt;CheckLogin error={&lt;LoginError /&gt;}&gt;
            &lt;RealmRole
              realmRole=&#39;example-admin-role&#39;
              error={
                &lt;RoleError
                  message={&#39;User do not have role : example-admin-role&#39;}
                /&gt;
              }&gt;
              &lt;div&gt;Example admin role specific functionality&lt;/div&gt;
            &lt;/RealmRole&gt;
          &lt;/CheckLogin&gt;
        )}
      /&gt;
      &lt;Route
        exact
        path=&#39;/example_user&#39;
        render={(_) =&gt; (
          &lt;CheckLogin error={&lt;LoginError /&gt;}&gt;
            &lt;RealmRole
              realmRole=&#39;person-role&#39;
              error={
                &lt;RoleError
                  message={&#39;User do not have role : person-role&#39;}
                /&gt;
              }&gt;
              &lt;div&gt;Person role specific functionality&lt;/div&gt;
            &lt;/RealmRole&gt;
          &lt;/CheckLogin&gt;
        )}
      /&gt;
      &lt;Route exact path=&#39;/public&#39; component={Read} /&gt;
    &lt;/div&gt;
  &lt;/BrowserRouter&gt;
&lt;/AuthContextProvider&gt;</code></pre></dd>
</dl>
<h4><a href="#source-code-for-authcontextprovider-component" name="source-code-for-authcontextprovider-component" class="anchor"><span class="anchor-link"></span></a>Source code for AuthContextProvider component</h4>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw-ts/tree/master/lib/src/components/aas/context/AuthContextProvider.tsx">AuthContextProvider Component</a></li>
</ul>
<h3><a href="#consumer" name="consumer" class="anchor"><span class="anchor-link"></span></a>Consumer</h3>
<p><code>Consumer</code> is similar to a React <a href="https://reactjs.org/docs/context.html#contextconsumer">Context.Consumer</a>. The shared <code>auth</code> object from the <code>AuthContextProvider</code> can be accessed using a <code>Consumer</code> component</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/Read.tsx#L6-L21" target="_blank" title="Go to snippet source"></a><code class="language-tsx">const { auth } = useContext(AuthContext)
return (
  &lt;div className=&#39;nav-wrapper&#39;&gt;
    {auth &amp;&amp; auth.isAuthenticated() ? (
      &lt;div&gt;
        Hello, you are logged in
        &lt;div&gt;Open functionality&lt;/div&gt;
      &lt;/div&gt;
    ) : (
      &lt;div&gt;
        Hello, you are not logged in
        &lt;div&gt;Open functionality&lt;/div&gt;
      &lt;/div&gt;
    )}
  &lt;/div&gt;
)</code></pre></dd>
</dl>
<h4><a href="#source-code-for-consumer-component" name="source-code-for-consumer-component" class="anchor"><span class="anchor-link"></span></a>Source code for Consumer component</h4>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw-ts/tree/master/lib/src/components/aas/context/AuthContext.ts">Consumer Component</a></li>
</ul>
<h3><a href="#login" name="login" class="anchor"><span class="anchor-link"></span></a>Login</h3>
<p>The <code>Login</code> component instantiates an AAS server with the configurations provided. It redirects to an AAS server login page for the user to login. After login, the <code>auth</code> object in the context is updated with the appropriate values, e.g. token, realm etc.</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/NavComponent.tsx#L43" target="_blank" title="Go to snippet source"></a><code class="language-tsx">&lt;Login /&gt;</code></pre></dd>
</dl>
<h4><a href="#source-code-for-login-component" name="source-code-for-login-component" class="anchor"><span class="anchor-link"></span></a>Source code for Login component</h4>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw-ts/tree/master/lib/src/components/aas/Login.tsx">Login Component</a></li>
</ul>
<h3><a href="#logout" name="logout" class="anchor"><span class="anchor-link"></span></a>Logout</h3>
<p>The <code>Logout</code> component logs out the user from the AAS server. It clears the <code>auth</code> object stored in the context.</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/NavComponent.tsx#L39-L40" target="_blank" title="Go to snippet source"></a><code class="language-tsx">  &lt;Logout /&gt;
) : (</code></pre></dd>
</dl>
<h4><a href="#source-code-for-logout-component" name="source-code-for-logout-component" class="anchor"><span class="anchor-link"></span></a>Source code for Logout component</h4>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw-ts/tree/master/lib/src/components/aas/Logout.tsx">Logout Component</a></li>
</ul>
<h3><a href="#checklogin" name="checklogin" class="anchor"><span class="anchor-link"></span></a>CheckLogin</h3>
<p><code>CheckLogin</code> components provide ability to show something only if the user is logged in. In the following code snippet, <code>Write</code> is a react component that is shown only if the user is logged in. The behavior if the user is not logged in can be defined by an HTML element or React component that is passed into the component as an <code>error</code> property, shown as an <code>ExampleError</code> Component in following snippet.</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/ExampleApp.tsx#L28-L30" target="_blank" title="Go to snippet source"></a><code class="language-tsx">&lt;CheckLogin error={&lt;LoginError /&gt;}&gt;
  &lt;Write /&gt;
&lt;/CheckLogin&gt;</code></pre></dd>
</dl>
<h4><a href="#source-code-for-checklogin-component" name="source-code-for-checklogin-component" class="anchor"><span class="anchor-link"></span></a>Source code for CheckLogin component</h4>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw-ts/tree/master/lib/src/components/aas/authentication/CheckLogin.tsx">CheckLogin Component</a></li>
</ul>
<h3><a href="#realmrole" name="realmrole" class="anchor"><span class="anchor-link"></span></a>RealmRole</h3>
<p><code>RealmRole</code> components provide the ability to show something only if the user is logged in and has the specified realm role. In the following code snippet, the contents of the <code>div</code> block are shown only if the user is logged in and has the realm role specified in the <code>realmRole</code> prop. Similar to <code>CheckLogin</code>, the behaviour if the user is not logged in can be optionally defined by an HTML element or React component that is passed into the component as an <code>error</code> property, shown as an <code>ExampleError</code> Component in following snippet.</p>
<dl>
  <dt>Javascript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-ts/tree/master/example/src/components/ExampleApp.tsx#L41-L49" target="_blank" title="Go to snippet source"></a><code class="language-tsx">&lt;RealmRole
  realmRole=&#39;example-admin-role&#39;
  error={
    &lt;RoleError
      message={&#39;User do not have role : example-admin-role&#39;}
    /&gt;
  }&gt;
  &lt;div&gt;Example admin role specific functionality&lt;/div&gt;
&lt;/RealmRole&gt;</code></pre></dd>
</dl>
<h4><a href="#source-code-for-realmrole-component" name="source-code-for-realmrole-component" class="anchor"><span class="anchor-link"></span></a>Source code for RealmRole component</h4>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw-ts/tree/master/lib/src/components/aas/authorization/RealmRole.tsx">RealmRole Component</a></li>
</ul>
<h2><a href="#technical-description" name="technical-description" class="anchor"><span class="anchor-link"></span></a>Technical Description</h2>
<p>See <a href="../technical/csw-aas-js.html">csw-aas-js Technical Description</a>.</p>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw-ts/tree/master/docs/src/main/aas/csw-aas-js.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.0*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../params/units.html" title="Units" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Units
</span>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
