<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/tmt_favicon.ico">
<title>Sequence Component Technical Documentation Â· TMT Executive Software Documentation</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../assets/custom.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="TMT Executive Software Documentation" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Executive Software Documentation
</span>
<span class="md-header-nav__topic">
Sequence Component Technical Documentation
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="TMT Executive Software Documentation" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="TMT Executive Software Documentation">
TMT Executive Software Documentation
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
<ul>
  <li><a href="../esw/eswOverview.html" class="page">Executive Software Overview</a></li>
  <li><a href="../sequencersandscripts/seq-index.html" class="page">Sequencers and Sequence Components</a>
  <ul>
    <li><a href="../sequencersandscripts/sequencer.html" class="page">Sequencers in the Executive Software</a></li>
    <li><a href="../sequencersandscripts/sequencer-app.html" class="page">Running a Sequencer Using esw-ocs-app</a></li>
  </ul></li>
  <li><a href="../scripts/scripts-index.html" class="page">Sequencer Scripts</a>
  <ul>
    <li><a href="../scripts/script-styles.html" class="page">Sequencer Script Styles</a></li>
    <li><a href="../scripts/dsl/script-constructs.html" class="page">Script DSL Constructs</a></li>
    <li><a href="../scripts/dsl/csw-services.html" class="page">CSW Services DSL</a></li>
  </ul></li>
  <li><a href="../uisupport/uisupp-index.html" class="page">User Interface Support</a>
  <ul>
    <li><a href="../uisupport/UIOverview.html" class="page">User Interfaces in ESW and TMT</a></li>
    <li><a href="../uisupport/gatewayUI-template.html" class="page">Using the Gateway-only UI Template and Tutorial</a></li>
    <li><a href="../uisupport/webapp-template.html" class="page">Using the Web Application Template and Tutorial</a></li>
    <li><a href="../uisupport/gateway.html" class="page">User Interface Gateway</a></li>
  </ul></li>
  <li><a href="../technical/apps/apps-index.html" class="page">ESW Applications</a>
  <ul>
    <li><a href="../technical/apps/getting-apps.html" class="page">Getting and Running ESW Applications</a></li>
    <li><a href="../technical/apps/esw-shell.html" class="page">ESW Shell - A Testing Environment for ESW and CSW</a></li>
    <li><a href="../technical/apps/sequence-manager-app.html" class="page">Starting the Sequence Manager Application</a></li>
    <li><a href="../technical/apps/agent-service-app.html" class="page">The Agent Service Application</a></li>
    <li><a href="../technical/apps/agent-app.html" class="page">The Agent Application</a></li>
    <li><a href="../uisupport/gateway-app.html" class="page">Running the UI Gateway App</a></li>
    <li><a href="../technical/apps/esw-services.html" class="page">Running Multiple ESW Applications with esw-services</a></li>
    <li><a href="../technical/apps/eng-ui.html" class="page">ESW OCS Engineering User Interface User Manual</a></li>
  </ul></li>
  <li><a href="../technical/tech-index.html" class="page">Technical Design Documents</a>
  <ul>
    <li><a href="../technical/sequence-manager-tech.html" class="page">Sequence Manager Technical Documentation</a></li>
    <li><a href="../technical/sequencer-tech.html" class="page">Sequencer Technical Documentation</a></li>
    <li><a href="../technical/sequence-component-tech.html" class="active page">Sequence Component Technical Documentation</a></li>
    <li><a href="../technical/gateway-tech.html" class="page">Gateway Technical Documentation</a></li>
    <li><a href="../technical/agent-service-tech.html" class="page">Agent Service and Agent Technical Documentation</a></li>
    <li><a href="../technical/esw-application-parts.html" class="page">ESW Application Architecture</a></li>
    <li><a href="../technical/contracts.html" class="page">Service Contracts</a></li>
    <li><a href="../technical/testing-philosophy.html" class="page">OSW Testing Philosophy</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../technical/sequence-component-tech.html#sequence-component-technical-documentation" class="header">Sequence Component Technical Documentation</a>
  <ul>
    <li><a href="../technical/sequence-component-tech.html#introduction" class="header">Introduction</a></li>
    <li><a href="../technical/sequence-component-tech.html#modules" class="header">Modules</a></li>
    <li><a href="../technical/sequence-component-tech.html#implementation-details" class="header">Implementation Details</a></li>
    <li><a href="../technical/sequence-component-tech.html#sequence-component-lifecycle" class="header">Sequence Component Lifecycle</a></li>
    <li><a href="../technical/sequence-component-tech.html#running-sequence-component" class="header">Running Sequence Component</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.5.0-RC2
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../technical/sequence-component-tech.html#sequence-component-technical-documentation" class="header">Sequence Component Technical Documentation</a>
  <ul>
    <li><a href="../technical/sequence-component-tech.html#introduction" class="header">Introduction</a></li>
    <li><a href="../technical/sequence-component-tech.html#modules" class="header">Modules</a></li>
    <li><a href="../technical/sequence-component-tech.html#implementation-details" class="header">Implementation Details</a></li>
    <li><a href="../technical/sequence-component-tech.html#sequence-component-lifecycle" class="header">Sequence Component Lifecycle</a></li>
    <li><a href="../technical/sequence-component-tech.html#running-sequence-component" class="header">Running Sequence Component</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#sequence-component-technical-documentation" name="sequence-component-technical-documentation" class="anchor"><span class="anchor-link"></span></a>Sequence Component Technical Documentation</h1>
<h2><a href="#introduction" name="introduction" class="anchor"><span class="anchor-link"></span></a>Introduction</h2>
<p>The Sequence Component is a standalone application that can load scripts and in doing so, become a Sequencer. In the OCS <em>scripting</em> approach, the Sequence Component is the reusable environment that supports the execution of different scripts. Use of the Sequence Component also reduces the time to load a Sequencer Script&ndash;similar to a scripting language shell.</p>
<p>Sequence Component will be a continuously running JVM process which will load and unload different script. When loading a script, the Sequencer will be started as a part of existing Sequence Component process. This step minimizes the start-up time for Sequencer to a fraction of a second.</p>
<p>The Sequence Component application and its arguments are described <a href="../sequencersandscripts/sequencer-app.html">here</a>.</p>
<h2><a href="#modules" name="modules" class="anchor"><span class="anchor-link"></span></a>Modules</h2>
<ul>
  <li>
  <p>esw-ocs-api - This module contains the API for Sequence Component. This is cross-compiled module, which is compiled into JVM as well as JS code. This module includes <code>SequenceComponentApi</code>, which defines the interface for Sequence Component. This module also consists of core models, actor client, JVM and JS client for Sequence Component.</p></li>
  <li>
  <p>esw-ocs-impl - This module consists of core implementation of Sequence Component which is <code>SequenceComponentActor</code>.</p></li>
  <li>
  <p>esw-ocs-app - This module consists of wiring as well as cli application to start Sequence Component. The wiring is the code that integrates Sequence Component to the ESW/CSW environment.</p></li>
</ul>
<h2><a href="#implementation-details" name="implementation-details" class="anchor"><span class="anchor-link"></span></a>Implementation Details</h2>
<p>The Sequence Component is written in Scala to provide integration with the CSW Component Framework and Services. Since component developers do not need to modify Sequence Component code, there is no Java version.</p>
<p>The Sequence Component registers itself with the Location Service when started. This allows the Sequence Manager to find the Sequence Component and send it commands. Sequence Component is started with a Subsystem and an optional name. While the Subsystem for a Sequence Component identifies to which subsystem the Sequence Component belongs, a Sequence Component can load Scripts for any subsystem, and therefore become a Sequencer for any subsystem. For example, if for some reason the IRIS Sequence Component is not reachable, an IRIS Script can be loaded into an ESW Sequence Component, and it can then be used as the IRIS Instrument Sequencer.</p>
<p>Sequence Component will be registered as Akka Connection in Location Service. The following table describes the registration of a Sequence Component in the Location Service:</p>
<table>
  <thead>
    <tr>
      <th align="center">Subsystem </th>
      <th align="center">Name </th>
      <th align="center">Registered Location </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">ESW </td>
      <td align="center">(none) </td>
      <td align="center">ESW.ESW_77 </td>
    </tr>
    <tr>
      <td align="center">ESW </td>
      <td align="center">primary </td>
      <td align="center">ESW.primary </td>
    </tr>
  </tbody>
</table>
<p>Note that CSW always capitalizes a subsystem when it is displayed. Arguments can be entered as lowercase.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>In all cases, the subsystem must be the acronyms defined by Systems Engineering and as defined in CSW. If the subsystem is not a valid TMT subsystem, an error will occur.</p></div><div class="callout note "><div class="callout-title">Note</div>
<p>If <code>Name</code> is not provided while starting Sequence Component, it will be uniquely generated using pattern -<code>Subsystem</code>.<code>Subsystem</code>_<code>&lt;Random number 1 to 100&gt;</code>. There exists possibility that, this generated name is already taken by another Sequence Component. To solve this scenario, Sequence Component registration involves retry mechanism which then generates another name and starts Sequence Component.</p></div>
<p>The Sequence Component provides framework code to support the loading and unloading of Scripts and a few other useful capabilities.</p>
<table>
  <thead>
    <tr>
      <th align="center">Message </th>
      <th align="left">Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">LoadScript</td>
      <td align="left">Load a script in the Sequence Component to create a Sequencer. Takes a subsystem, observing mode and variation as arguments. </td>
    </tr>
    <tr>
      <td align="center">UnloadScript</td>
      <td align="left">Unloads a loaded script returning a Sequence Component. </td>
    </tr>
    <tr>
      <td align="center">RestartScript </td>
      <td align="left">Unloads and reloads a script causing initialization of state. </td>
    </tr>
    <tr>
      <td align="center">GetStatus </td>
      <td align="left">Returns the Location of the Sequence Component&rsquo;s loaded Sequencer </td>
    </tr>
    <tr>
      <td align="center">Shutdown </td>
      <td align="left">Shutdown sequence component and sequencer loaded(if any) </td>
    </tr>
  </tbody>
</table>
<ul>
  <li>For more details on the messages handled by the Sequence Component see <a href="https://github.com/tmtsoftware/esw/tree/fc99c5987bfef9da8b3fd44f1fe0dfbef9fce54a/esw-ocs/esw-ocs-api/jvm/src/main/scala/esw/ocs/api/actor/messages/SequenceComponentMsg.scala">here</a></li>
</ul>
<h2><a href="#sequence-component-lifecycle" name="sequence-component-lifecycle" class="anchor"><span class="anchor-link"></span></a>Sequence Component Lifecycle</h2>
<p>Sequence Component is implemented as Finite State Machine using Akka Actor as core. The Sequence Component also has a lifecycle, but it is simpler than the Sequencer lifecycle. The following figure shows the Sequence Component has two states: <code>Idle</code> and <code>Running</code>.</p>
<ul>
  <li>
  <p><strong>Idle:</strong> This is the default state of a Sequence Component when it is started. It is ready for the loading of a Script that will create a Sequencer, which occurs on a <code>LoadScript</code> command. If successful, the Sequence Component transitions to the <code>Running</code> state. While in the <code>Idle</code> state, the Sequence Component responds to the <code>GetStatus</code> message and ignores the <code>UnloadScript</code> message without error. For <code>RestartScript</code> message, sequence component responds with error saying <code>RestartScript</code> in unhandled in <code>idle</code> state.</p></li>
  <li>
  <p><strong>Running:</strong> Once a Sequence Component has successfully loaded a Script, it is in the <code>Running</code> state. The new Sequencer will be available to process Sequences until it receives an <code>UnloadScript</code> message and transitions back to the <code>Idle</code> state. While in the <code>Running</code> state, the Sequence Component can also receive a <code>RestartScript</code> message, which restarts a Sequencer by unloading the Script and shutting down the Sequencer, immediately followed by the loading of the Script again. This has the effect of initializing the script. For <code>LoadScript</code> message, sequence component responds with error saying that <code>LoadScript</code> is unhandled in <code>Running</code> state. The Sequence Component responds successfully to the <code>GetStatus</code> message.</p></li>
</ul><div class="callout note "><div class="callout-title">Note</div>
<p><code>Shutdown</code> sequence component message is handled in both <code>Idle</code> and <code>Running</code> state. In <code>Idle</code> state, it un-registers sequence component in location service, terminates actor system and gracefully shutdown sequence component. In <code>Running</code> state, shutdown consist of additional step apart from <code>Idle</code> state shutdown, which is shutting down sequencer loaded on the sequence component.</p></div>
<p><img src="../images/ocs/OCS-SeqCompLifecycle.png" alt="sequencecomp-lifecycle" /></p>
<h2><a href="#running-sequence-component" name="running-sequence-component" class="anchor"><span class="anchor-link"></span></a>Running Sequence Component</h2>
<p>For running Sequence Component Stand-alone or with Sequencer Script, please refer <a href="../sequencersandscripts/sequencer-app.html">this</a>.</p>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw/tree/fc99c5987bfef9da8b3fd44f1fe0dfbef9fce54a/docs/src/main/technical/sequence-component-tech.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.5.0-RC2
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../technical/sequencer-tech.html" title="Sequencer Technical Documentation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Sequencer Technical Documentation
</span>
</div>
</a>
<a href="../technical/gateway-tech.html" title="Gateway Technical Documentation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Gateway Technical Documentation
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
