<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="assets/tmt_favicon.ico">
<title>TMT Executive Software (ESW)</title>
<link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="lib/prettify/prettify.css">
<script src="assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="assets/fonts/font-awesome.css">
<link rel="stylesheet" href="assets/fonts/material-icons.css">
<link rel="stylesheet" href="assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="index.html" title="TMT Executive Software (ESW)" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
TMT Executive Software (ESW)
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="index.html" title="TMT Executive Software (ESW)" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="index.html" title="TMT Executive Software (ESW)">
TMT Executive Software (ESW)
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
<ul>
  <li><a href="sequencer/seqcompsequencer/index.html" class="page">Sequence Components and Sequencers</a>
  <ul>
    <li><a href="sequencer/seqcompsequencer/Terms.html" class="page">OCS Terms</a></li>
    <li><a href="sequencer/seqcompsequencer/SeqComp.html" class="page">Sequence Component</a></li>
    <li><a href="sequencer/seqcompsequencer/Sequencers.html" class="page">Sequencers</a></li>
    <li><a href="sequencer/seqcompsequencer/state-transition.html" class="page">Sequencer Lifecycle</a></li>
  </ul></li>
  <li><a href="sequencer/scripts/scripts.html" class="page">Sequencer Scripts</a>
  <ul>
    <li><a href="sequencer/scripts/script-styles.html" class="page">Sequencer Script Styles</a></li>
    <li><a href="sequencer/scripts/dsl/script-constructs.html" class="page">Script DSL Constructs</a></li>
    <li><a href="sequencer/scripts/dsl/csw-services.html" class="page">CSW Services DSL</a></li>
  </ul></li>
  <li><a href="commons/contracts.html" class="page">ESW Service contract</a></li>
  <li><a href="apps/apps.html" class="page">Applications</a>
  <ul>
    <li><a href="apps/sequencerapp.html" class="page">sequencer-app</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="index.html#tmt-executive-software-esw-" class="header">TMT Executive Software (ESW)</a>
  <ul>
    <li><a href="index.html#observatory-control-system-ocs-" class="header">Observatory Control System (OCS)</a></li>
    <li><a href="index.html#esw-phase-1-development" class="header">ESW Phase 1 Development</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1.0
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="index.html#tmt-executive-software-esw-" class="header">TMT Executive Software (ESW)</a>
  <ul>
    <li><a href="index.html#observatory-control-system-ocs-" class="header">Observatory Control System (OCS)</a></li>
    <li><a href="index.html#esw-phase-1-development" class="header">ESW Phase 1 Development</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#tmt-executive-software-esw-" name="tmt-executive-software-esw-" class="anchor"><span class="anchor-link"></span></a>TMT Executive Software (ESW)</h1>
<p>The functionality of TMT Observatory Software is provided by three Level 2 software subsystems in the Observatory Software Architecture of which ESW is one (the others are Data Management System, and Science Operations Support Software). ESW itself consists of five subsystems: ESW.OCS, Observatory Control System; ESW.UISTD, User Interface Standards, ESW.HCMS, High-level Control and Monitoring System; ESW.VIZ, Visualization System; ESW.ACQ, Acquisition and Observing Scripts. The ESW subsystems are largely independent, although ACQ does depend on OCS. However, the subsystems work together to provide the total functionality needed for OSW.</p>
<p>The OSW software architecture is split into the Technical Architecture and the Functional Architecture. ESW is part of the Functional Architecture that provides the software applications and components that implement the functionality of the observatory from the point of view of the users. It depends on and uses the Technical Architecture provided by the Common Software (CSW) subsystem. <a href="https://tmtsoftware.github.io/csw/">See CSW documentation here.</a>.</p>
<p>The ESW subsystems provide the core functionality needed to enable the TMT operations modes including: PI-Directed observing, Pre-planned Service Queue, and conditions-based queue scheduled observing. The ESW enables operation of all TMT subsystems from user interfaces or other programs. Sequencing is the term used to describe the operations the software system must do to coordinate control of the telescope subsystems and the instruments in the specific order needed to collect science data. The Observatory Control System (OCS) subsystem of ESW is the central engine that provides the sequencing functionality. The Sequencing System consists of one or more Sequence Components that are configured with Scripts to form Sequencers.</p>
<p><img src="./images/ocs/OCS1.png" alt="OCS" /></p>
<p>In this figure, a science-oriented description of an astronomical observation, as produced by a user interface program (such as an instrument acquisition user interface), planning tool, or database record is used as the input for sequencing. This input, as a Sequence, is passed to and accepted by the OCS, which creates and passes the observation description to the Sequence Components of the OCS. The Sequence Components and lower level control system software manipulate the hardware subsystems to generate science frames (made up of data frames and metadata). The science frames use the bulk data distribution functionality of the DMS and ESW.VIZ subsystem to distribute the science frames to dataset consumers (data processing or visualization, for instance). </p>
<p>The User Interface Standards subsystem (UISTD) of ESW includes user interface standards and reusable UI code solutions that enable local and remote use of user interfaces as well as common styles, conventions, and widgets that are shared across all user interfaces. The creation of specific observing user interfaces is the responsibility of the High level Control and Monitoring System (HCMS) subsystem. HCMS provides a consistent, unified experience across all tools and user interfaces built upon the standards and solutions of the UISTD package and the control and monitoring capabilities provided by OCS package and the technology choices of the CSW subsystem infrastructure.</p>
<p>The observer user interface for visualizing science frames during acquisition and observing (quick-look) is within the Visualization System (VIZ) package. VIZ also includes any infrastructure needed to support visualization of basic science images and wavefront sensor images as needed for acquisition such as image distribution and a platform for data processing.</p>
<p>Completing the observing workflow are support and scripts that implement observing and the acquisition process. Acquisition integrates almost every system of OSW, the telescope, and instrumentation. The Acquisition System (ACQ) package is a user focused package that implements the acquisition process for the observing sequences including known engineering observations. Acquisition-focused user interface tools will be included in ACQ as necessary based on how the observing workflows develop over the next few years.</p>
<h3><a href="#observatory-control-system-ocs-" name="observatory-control-system-ocs-" class="anchor"><span class="anchor-link"></span></a>Observatory Control System (OCS)</h3>
<p>In the TMT Software System, OCS provides the sequencing software to carry out the observations planned and scheduled via software implemented by the Science Operations Support Subsystem (SOSS). Planning information created during Phase 2 and contained in the Observing Database, a part of SOSS, is used to generate the Observing Block and the Sequence, which is passed to the ESW OCS for execution. All observation types: science, calibration, and engineering are executed through the ESW.OCS infrastructure. This is necessary to have a full understanding of how the telescope and instruments are used for time accounting purposes. It is also expected that most if not all observations, including calibration and engineering, will be described using the SOSS planning tools.</p>
<p>ESW.OCS provides the Sequence Component, which is one of the OMOA architecture components (along with HCD, Assembly, Container, and Application). The Sequence Component is programmable by running a “script” that can vary based on the observing mode in use. The generic Sequence Component when configured with a Script becomes a Sequencer. Scripts are stored in a dedicated change-controlled repository. The configured Sequencer executes the Sequence by examining and processing each step of the Sequence and taking any actions needed to match the step such as sending commands to other components.</p>
<p>The Sequencer Component contains the environment for executing scripts called the Engine. It provides the “service glue” that allows the script code to use the CSW Services to send commands and subscribe to and react to event data.</p>
<p>For most observations (i.e. science, calibration, engineering), a master OCS Sequencer is used to control other subsystem Sequencers (such as TCS and IRIS), which in turn control subsystem Assemblies and HCDS in the OMOA hierarchy, as shown in the following figure. The scripts for science, acquisition, and some engineering purposes used by the OCS master sequencer are a product of ESW.ACQ.</p>
<p><img src="./images/ocs/OCS3.png" alt="OCS3" /></p>
<p>OCS also includes a Sequence Manager application that acts as the front-end to the OCS sequencing system. The Sequence Manager receives Sequences from the SOSS or other tools, manages observatory resources, and starts, initializes, and stops Sequencers as needed for each received Sequence.</p>
<p>The following summarizes the responsibilities of OCS.</p>
<ul>
  <li>Accept and execute Sequences submitted from SOSS in all operations modes.</li>
  <li>Manage the process of executing a single Sequence or multiple concurrent Sequences including starting any needed Sequencers.</li>
  <li>Ensure that the resources needed for a Sequence are available before allowing the Sequence to execute.</li>
  <li>Provide a reusable Sequence Component that executes Scripts and processes Sequences from SOSS.</li>
  <li>Provide a Script programming environment that provides access to appropriate CSW Services and has the level of control needed to execute acquisition, observing workflows, calibrations, and some engineering sequences.</li>
  <li>Allow an external user interface program to monitor and control the progress of an executing Sequence, and provide such tools.</li>
  <li>Define information needed for Observatory metrics (shared effort between OCS, ACQ, HCMS).</li>
</ul>
<h3><a href="#esw-phase-1-development" name="esw-phase-1-development" class="anchor"><span class="anchor-link"></span></a>ESW Phase 1 Development</h3>
<p>Planning for ESW led to the conclusion that the best approach was to split the ESW work into two phases. Resource limitations were one factor, but it is also necessary to focus initially on providing the decisions and parts of ESW on which other TMT subsystems depend as soon as possible, so that those subsystems can continue with their design work. Once these features are available, OSW future development is largely decoupled from other subsystems, and the other subsystems have what they need to plan and develop independently of OSW. The plan is to have an ESW Phase 2 final design in the future. </p>
<p>The following are the Phase 1 priorities:</p>
<ul>
  <li>Sequencer/script design and integration with services</li>
  <li>Integration of the browser UI environment with CSW and early tool choices for UI development</li>
  <li>Define and implement Observe Events and the Observe command</li>
</ul>
<p>Three main components are delivered as part of ESW Phase 1:</p>
<ul>
  <li><strong>Sequencer:</strong> This allows users to create a <code>Sequencer</code> component. Both top-level Sequencer (OCS) and subsystem Sequencers can be created using the same framework. This allows subsystem experts to write custom scripts for each sequencer in a Kotlin-based domain specific language (DSL). All sequencer scripts will be written in the <a href="https://github.com/tmtsoftware/sequencer-scripts">Sequencer Scripts Repository</a>.</li>
  <li><strong>Sequence Component:</strong> The Sequence Component is used to spawn and shutdown sequencers dynamically.</li>
  <li><strong>ESW Gateway:</strong> This is provided to give access to all CSW and ESW services and components from future browser-based user interfaces.</li>
</ul><div class="callout note "><div class="callout-title">What is in ESW Phase 1 Release 1?</div>
<p>The first development phase of ESW Phase 1 has focused on the Sequence Component, Sequencer, and Scripts. The goal is to get feedback to guide further development in these areas. Additionally, the ESW Gateway is provided for testing. The Gateway provides CSW services focused on the needs of user interfaces.</p>
<p>Future development phases will focus on Sequence Manager, Observing Events and user interface support.</p></div><div class="callout note "><div class="callout-title">Note</div>
<p>Executive Software (ESW) is a reimplementation/refactoring of the prototype ESW code <a href="https://github.com/tmtsoftware/esw-prototype">here</a> developed during the ESW design phase, with changes to make the code and public APIs more robust and resilient, and to improve its usability and performance for use at the TMT Observatory.</p></div>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw/tree/master/docs/src/main/index.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="sequencer/seqcompsequencer/index.html" title="Sequence Components and Sequencers" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Sequence Components and Sequencers
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="assets/javascripts/application.583bbe55.js"></script>
<script src="assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"."}})</script>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
