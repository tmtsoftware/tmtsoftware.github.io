<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../assets/images/favicon.png">
<title>Starting the Sequence Manager Application · TMT Executive Software Documentation</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../lib/prettify/prettify.css">
<script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../index.html" title="TMT Executive Software Documentation" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Executive Software Documentation
</span>
<span class="md-header-nav__topic">
Starting the Sequence Manager Application
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../index.html" title="TMT Executive Software Documentation" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../../index.html" title="TMT Executive Software Documentation">
TMT Executive Software Documentation
</a>
</label>
<ul>
  <li><a href="../../esw/eswOverview.html" class="page">Executive Software Overview</a></li>
  <li><a href="../../sequencersandscripts/seq-index.html" class="page">Sequencers and Sequence Components</a>
  <ul>
    <li><a href="../../sequencersandscripts/sequencer.html" class="page">Sequencers in the Executive Software</a></li>
    <li><a href="../../sequencersandscripts/sequencer-app.html" class="page">Running a Sequencer Using esw-ocs-app</a></li>
  </ul></li>
  <li><a href="../../scripts/scripts-index.html" class="page">Sequencer Scripts</a>
  <ul>
    <li><a href="../../scripts/script-styles.html" class="page">Sequencer Script Styles</a></li>
    <li><a href="../../scripts/dsl/script-constructs.html" class="page">Script DSL Constructs</a></li>
    <li><a href="../../scripts/dsl/csw-services.html" class="page">CSW Services DSL</a></li>
  </ul></li>
  <li><a href="../../uisupport/uisupp-index.html" class="page">User Interface Support</a>
  <ul>
    <li><a href="../../uisupport/UIOverview.html" class="page">User Interfaces in ESW and TMT</a></li>
    <li><a href="../../uisupport/gatewayUI-template.html" class="page">Using the Gateway-only UI Template and Tutorial</a></li>
    <li><a href="../../uisupport/webapp-template.html" class="page">Using the Web Application Template and Tutorial</a></li>
    <li><a href="../../uisupport/gateway.html" class="page">User Interface Gateway</a></li>
    <li><a href="../../uisupport/gateway-app.html" class="page">Running the UI Gateway App</a></li>
  </ul></li>
  <li><a href="../../technical/apps/apps-index.html" class="page">ESW Applications</a>
  <ul>
    <li><a href="../../technical/apps/getting-apps.html" class="page">Getting and Running ESW Applications</a></li>
    <li><a href="../../technical/apps/esw-shell.html" class="page">ESW Shell - A Testing Environment for ESW and CSW</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html" class="active page">Starting the Sequence Manager Application</a></li>
    <li><a href="../../technical/apps/agent-service-app.html" class="page">The Agent Service Application</a></li>
    <li><a href="../../technical/apps/agent-app.html" class="page">The Agent Application</a></li>
    <li><a href="../../technical/apps/eng-ui.html" class="page">ESW OCS Engineering User Interface User Manual</a></li>
  </ul></li>
  <li><a href="../../technical/tech-index.html" class="page">Technical Design Documents</a>
  <ul>
    <li><a href="../../technical/sequence-manager-tech.html" class="page">Sequence Manager Technical Documentation</a></li>
    <li><a href="../../technical/sequencer-tech.html" class="page">Sequencer Technical Documentation</a></li>
    <li><a href="../../technical/sequence-component-tech.html" class="page">Sequence Component Technical Documentation</a></li>
    <li><a href="../../technical/gateway-tech.html" class="page">Gateway Technical Documentation</a></li>
    <li><a href="../../technical/agent-service-tech.html" class="page">Agent Service and Agent Technical Documentation</a></li>
    <li><a href="../../technical/esw-application-parts.html" class="page">ESW Application Architecture</a></li>
    <li><a href="../../technical/contracts.html" class="page">Service Contracts</a></li>
    <li><a href="../../technical/testing-philosophy.html" class="page">OSW Testing Philosophy</a></li>
    <li><a href="../../technical/apps/esw-services.html" class="page">Running Multiple ESW Applications with esw-services</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../technical/apps/sequence-manager-app.html#starting-the-sequence-manager-application" class="header">Starting the Sequence Manager Application</a>
  <ul>
    <li><a href="../../technical/apps/sequence-manager-app.html#1-install-coursier-and-the-tmt-apps-channel" class="header">1. Install <code>coursier</code> and the TMT Apps Channel</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#2-start-needed-csw-services" class="header">2. Start needed CSW services</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#3-install-esw-sm-app" class="header">3. Install esw-sm-app</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#4-run-sequence-manager-with-the-installed-esw-sm-app" class="header">4. Run Sequence Manager with the installed esw-sm-app</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#starting-sequence-manager-in-simulation-mode" class="header">Starting Sequence Manager in Simulation Mode</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#4-run-esw-sm-app-in-simulation-mode" class="header">4. Run esw-sm-app in Simulation Mode</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#5-running-esw-sm-app-in-simulation-mode-without-esw-services" class="header">5. Running esw-sm-app in Simulation Mode Without esw-services</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1.0*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../technical/apps/sequence-manager-app.html#starting-the-sequence-manager-application" class="header">Starting the Sequence Manager Application</a>
  <ul>
    <li><a href="../../technical/apps/sequence-manager-app.html#1-install-coursier-and-the-tmt-apps-channel" class="header">1. Install <code>coursier</code> and the TMT Apps Channel</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#2-start-needed-csw-services" class="header">2. Start needed CSW services</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#3-install-esw-sm-app" class="header">3. Install esw-sm-app</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#4-run-sequence-manager-with-the-installed-esw-sm-app" class="header">4. Run Sequence Manager with the installed esw-sm-app</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#starting-sequence-manager-in-simulation-mode" class="header">Starting Sequence Manager in Simulation Mode</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#4-run-esw-sm-app-in-simulation-mode" class="header">4. Run esw-sm-app in Simulation Mode</a></li>
    <li><a href="../../technical/apps/sequence-manager-app.html#5-running-esw-sm-app-in-simulation-mode-without-esw-services" class="header">5. Running esw-sm-app in Simulation Mode Without esw-services</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#starting-the-sequence-manager-application" name="starting-the-sequence-manager-application" class="anchor"><span class="anchor-link"></span></a>Starting the Sequence Manager Application</h1>
<p><code>esw-sm-app</code> is a command line application that facilitates starting Sequence Manager, and the HTTP server that is part of Sequence Manager using the <code>coursier</code> dependency management application. The <code>coursier</code> tool is described with full documentation at the <a href="https://get-coursier.io">coursier site</a>.</p>
<p>The following steps should be followed to use esw-sm-app to start a Sequencer Manager.</p>
<h2><a href="#1-install-coursier-and-the-tmt-apps-channel" name="1-install-coursier-and-the-tmt-apps-channel" class="anchor"><span class="anchor-link"></span></a>1. Install <code>coursier</code> and the TMT Apps Channel</h2>
<p>The <code>coursier</code> application must be installed on your machine and the OCS Apps channel must be installed. The instructions for doing this are provided <a href="getting-apps.html">here</a>.</p>
<h2><a href="#2-start-needed-csw-services" name="2-start-needed-csw-services" class="anchor"><span class="anchor-link"></span></a>2. Start needed CSW services</h2>
<p>To run esw-sm-app:</p>
<ul>
  <li>the CSW Location Service must be running,</li>
  <li>And CSW Authorization and Authentication Service should be running.</li>
</ul>
<p>Information on starting CSW services is <a href="https://tmtsoftware.github.io/csw/0.1.0-SNAPSHOT/commons/apps">here</a>.</p>
<h2><a href="#3-install-esw-sm-app" name="3-install-esw-sm-app" class="anchor"><span class="anchor-link"></span></a>3. Install esw-sm-app</h2>
<p>The following <code>coursier</code> command creates an executable file named <code>esw-sm-app</code> in the default coursier installation directory.</p>
<pre class="prettyprint"><code class="language-bash">cs install esw-sm-app:&lt;version | SHA&gt;
</code></pre>
<p>One can specify the installation directory like the following:</p>
<pre class="prettyprint"><code class="language-bash">cs install --install-dir /tmt/apps esw-sm-app:&lt;version | SHA&gt;
</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>If you don&rsquo;t provide the version <em>or</em> SHA in above command, <code>esw-sm-app</code> will be installed with the latest tagged binary of <code>esw-sm-app</code>.</p></div>
<h2><a href="#4-run-sequence-manager-with-the-installed-esw-sm-app" name="4-run-sequence-manager-with-the-installed-esw-sm-app" class="anchor"><span class="anchor-link"></span></a>4. Run Sequence Manager with the installed esw-sm-app</h2>
<p>Once esw-sm-app is installed, one can simply execute esw-sm-app with the start command.</p>
<p>Start command supports following arguments:</p>
<ul>
  <li><code>-p</code> : optional argument: port on which HTTP server will be bound. If a value is not provided, it will be randomly picked.</li>
  <li><code>-o</code> : Config file path which has mapping of sequencers and resources needed for different observing modes</li>
  <li><code>-l</code> : optional argument (true if config is to be read locally or false if from the Configuration Service) default value is false</li>
  <li><code>-a</code> : optional argument: This argument is used when Sequence Manager is spawned using Agent. It is the prefix for the Agent on  which the Sequence Manager will be spawned (examples: ESW.agent1, IRIS.agent2 etc). For starting standalone Sequence Manager for testing or on local  this argument is not needed.</li>
</ul>
<p>This command starts Sequence Manager as well as its HTTP interface.</p>
<pre class="prettyprint"><code class="language-bash">//cd to installation directory
cd /tmt/apps

// run Sequence Manager
./esw-sm-app start -o obsmode.conf
</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>Refer to supported arguments section above or <code>./esw-sm-app start --help</code> for starting Sequence Manager with specific arguments.</p></div>
<h3><a href="#sequence-manager-obsmode-configuration-file" name="sequence-manager-obsmode-configuration-file" class="anchor"><span class="anchor-link"></span></a>Sequence Manager ObsMode Configuration File</h3>
<p>The Sequence Manager&rsquo;s job is to start Sequencers, manage observatory resources and determine when obsModes can execute concurrently. The Sequence Manager is configured with a file that specifies available Observing Modes or &ldquo;obsModes&rdquo;. Each obsMode has a list of resources required by the obsMode and a list of Sequencers that are started for the obsMode.</p>
<p>Resources are currently specified using subsystem names such as ESW or TCS. Sequencers are also specified by a subsystem name. In this case, Sequence Manager uses the obsMode and the subsystem to find the correct script to load in the subsystem&rsquo;s Sequencer. The scripts are located in the <code>sequencer-scripts</code> repository. </p>
<p>The obsMode configuration file is written in JSON. An example follows with three obsModes: IRIS_MCAO, IRIS_Calib, and WFOS_Calib. By convention obsModes start with the instrument&rsquo;s subsystem name followed by an underscore and some other description.</p>
<pre><code>esw-sm {
  obsModes: {
    IRIS_MCAO: {
      resources: [IRIS, TCS, NFIRAOS]
      sequencers: [IRIS, ESW, AOESW, TCS]
    },
    IRIS_Calib: {
      resources: [IRIS, NFIRAOS]
      sequencers: [IRIS, ESW, AOESW]
    },
    WFOS_Calib: {
      resources: [WFOS]
      sequencers: [WFOS, ESW]
    }
  }
}
</code></pre>
<h3><a href="#setting-the-log-level" name="setting-the-log-level" class="anchor"><span class="anchor-link"></span></a>Setting the Log Level</h3>
<p>The default log level for any component is specified in the <code>application.conf</code> file of the component. Use the java -J-D option to override configuration values at runtime. For log level, the format is:</p>
<pre><code>-J-Dcsw-logging.component-log-levels.&lt;Subsystem&gt;.&lt;ComponentName&gt;=&lt;LEVEL&gt;
</code></pre>
<p>For example, using the example above:</p>
<pre class="prettyprint"><code class="language-bash">//cd to installation directory
cd /tmt/apps

// run Sequence Manager
./esw-sm-app -J-Dcsw-logging.component-log-levels.ESW.sequence_manager=TRACE start -o obsmode.conf
</code></pre>
<h2><a href="#starting-sequence-manager-in-simulation-mode" name="starting-sequence-manager-in-simulation-mode" class="anchor"><span class="anchor-link"></span></a>Starting Sequence Manager in Simulation Mode</h2>
<p>The Sequence Manager supports a simulation mode, which is primarily useful for standalone testing of the Sequence Manager. When started in simulation mode, the Sequence Manager starts bypasses the Agents, and starts Sequence Components internally. The register themselves with the Location Service and load Scripts and Sequencers as normal, but simulated Sequence Manager can start on its own.</p>
<h3><a href="#1-install-coursier-and-add-the-tmt-apps-channel" name="1-install-coursier-and-add-the-tmt-apps-channel" class="anchor"><span class="anchor-link"></span></a>1. Install <code>coursier</code> and add the TMT Apps channel</h3>
<p>The <code>coursier</code> application must be installed on your machine, and the OCS Apps channel must be installed. The instructions for doing this are provided <a href="getting-apps.html">here</a>.</p>
<h3><a href="#2-start-any-needed-csw-services" name="2-start-any-needed-csw-services" class="anchor"><span class="anchor-link"></span></a>2. Start any Needed CSW services</h3>
<ul>
  <li>To run esw-sm-app in simulation mode, the <strong>CSW Location Service</strong> must be running.</li>
</ul>
<h3><a href="#3-install-esw-services" name="3-install-esw-services" class="anchor"><span class="anchor-link"></span></a>3. Install esw-services</h3>
<p>The following command creates an executable file named <code>esw-services</code> in the default installation directory.</p>
<pre class="prettyprint"><code class="language-bash">cs install esw-services:&lt;version | SHA&gt;
</code></pre>
<h2><a href="#4-run-esw-sm-app-in-simulation-mode" name="4-run-esw-sm-app-in-simulation-mode" class="anchor"><span class="anchor-link"></span></a>4. Run esw-sm-app in Simulation Mode</h2>
<pre class="prettyprint"><code class="language-bash">cs launch esw-services – start -s --simulation
//  where:
//    -s : to start SequenceManager
//    --simulation : in simulation mode
</code></pre>
<h2><a href="#5-running-esw-sm-app-in-simulation-mode-without-esw-services" name="5-running-esw-sm-app-in-simulation-mode-without-esw-services" class="anchor"><span class="anchor-link"></span></a>5. Running esw-sm-app in Simulation Mode Without esw-services</h2>
<pre class="prettyprint"><code class="language-bash">cs launch esw-sm-app:&lt;version | SHA&gt; -- start --simulation
</code></pre><div class="callout warning "><div class="callout-title">Warning</div>
<p>If esw-sm-app is started independent of esw-services in the simulation mode then following things are needed to be taken care of: * Agents won&rsquo;t be spawned automatically, they have to be started manually. * A version.conf needs to be created in config-service for the Provision api to work. </p></div>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw/tree/master/docs/src/main/technical/apps/sequence-manager-app.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.0*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../technical/apps/esw-shell.html" title="ESW Shell - A Testing Environment for ESW and CSW" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
ESW Shell - A Testing Environment for ESW and CSW
</span>
</div>
</a>
<a href="../../technical/apps/agent-service-app.html" title="The Agent Service Application" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
The Agent Service Application
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../."}})</script>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
