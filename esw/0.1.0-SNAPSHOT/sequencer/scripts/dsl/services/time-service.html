<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../../../assets/tmt_favicon.ico">
<title>Time Service Dsl Â· TMT Executive Software (ESW)</title>
<link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../../lib/prettify/prettify.css">
<script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../../index.html" title="TMT Executive Software (ESW)" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Executive Software (ESW)
</span>
<span class="md-header-nav__topic">
Time Service Dsl
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../../index.html" title="TMT Executive Software (ESW)" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../../../../index.html" title="TMT Executive Software (ESW)">
TMT Executive Software (ESW)
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
<ul>
  <li><a href="../../../../sequencer/server/sequencer-server.html" class="page">Sequencer HTTP Server</a></li>
  <li><a href="../../../../sequencer/scripts/scripts.html" class="page">Sequencer Script</a>
  <ul>
    <li><a href="../../../../sequencer/scripts/fsm.html" class="page">FSM</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/dsl.html" class="page">High Level DSL</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#time-service-dsl" class="header">Time Service Dsl</a>
  <ul>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#utctimenow" class="header">utcTimeNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#taitimenow" class="header">taiTimeNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#utctimeafter" class="header">utcTimeAfter</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#taitimeafter" class="header">taiTimeAfter</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleonce" class="header">scheduleOnce</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleoncefromnow" class="header">scheduleOnceFromNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleperiodically" class="header">schedulePeriodically</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleperiodicallyfromnow" class="header">schedulePeriodicallyFromNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#source-code-for-above-examples" class="header">Source code for above examples</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1.0*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#time-service-dsl" class="header">Time Service Dsl</a>
  <ul>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#utctimenow" class="header">utcTimeNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#taitimenow" class="header">taiTimeNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#utctimeafter" class="header">utcTimeAfter</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#taitimeafter" class="header">taiTimeAfter</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleonce" class="header">scheduleOnce</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleoncefromnow" class="header">scheduleOnceFromNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleperiodically" class="header">schedulePeriodically</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#scheduleperiodicallyfromnow" class="header">schedulePeriodicallyFromNow</a></li>
    <li><a href="../../../../sequencer/scripts/dsl/services/time-service.html#source-code-for-above-examples" class="header">Source code for above examples</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#time-service-dsl" name="time-service-dsl" class="anchor"><span class="anchor-link"></span></a>Time Service Dsl</h1>
<p>Time Service Dsl is dsl wrapper over time service module provided by csw. This dsl exposes following APIs to script writers to schedule tasks at given time. It also exposes utility methods for getting specified utc time or tai time and calculate offset. </p>
<h2><a href="#utctimenow" name="utctimenow" class="anchor"><span class="anchor-link"></span></a>utcTimeNow</h2>
<p>This utility provides current utc time.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L41" target="_blank" title="Go to snippet source"></a><code class="language-kts">val currentUtcTime = utcTimeNow()</code></pre></dd>
</dl>
<h2><a href="#taitimenow" name="taitimenow" class="anchor"><span class="anchor-link"></span></a>taiTimeNow</h2>
<p>This utility provides current utc time.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L44" target="_blank" title="Go to snippet source"></a><code class="language-kts">val currentTaiTime = taiTimeNow()</code></pre></dd>
</dl>
<h2><a href="#utctimeafter" name="utctimeafter" class="anchor"><span class="anchor-link"></span></a>utcTimeAfter</h2>
<p>This utility provides utc time after provided duration. Following example shows how to get utc time after 1 hour</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L48" target="_blank" title="Go to snippet source"></a><code class="language-kts">val utcTime = utcTimeAfter(1.hours)</code></pre></dd>
</dl>
<h2><a href="#taitimeafter" name="taitimeafter" class="anchor"><span class="anchor-link"></span></a>taiTimeAfter</h2>
<p>This utility provides tai time after provided duration. Following example shows how to get tai time after 1 hour</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L52" target="_blank" title="Go to snippet source"></a><code class="language-kts">val taiTime = taiTimeAfter(1.hours)</code></pre></dd>
</dl>
<h2><a href="#scheduleonce" name="scheduleonce" class="anchor"><span class="anchor-link"></span></a>scheduleOnce</h2>
<p>This API allows to schedule non periodic task in script at specified utc time or tai time. This a handle to cancel the execution of the task if it hasn&rsquo;t been executed already</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L62-L64" target="_blank" title="Go to snippet source"></a><code class="language-kts">scheduleOnce(taiTimeNow()) {
    publishEvent(SystemEvent(&quot;lgsf&quot;, &quot;publish.success&quot;))
}</code></pre></dd>
</dl>
<h2><a href="#scheduleoncefromnow" name="scheduleoncefromnow" class="anchor"><span class="anchor-link"></span></a>scheduleOnceFromNow</h2>
<p>This API allows to schedule non periodic task in script after specified duration. This API takes time duration after which task will be scheduled. scheduleOnceFromNow internally creates instance of utc time considering specified in duration. Following example shows scheduling task after 1 hour from current utc time. This a handle to cancel the execution of the task if it hasn&rsquo;t been executed already.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L68-L70" target="_blank" title="Go to snippet source"></a><code class="language-kts">scheduleOnceFromNow(1.hours) {
    publishEvent(SystemEvent(&quot;lgsf&quot;, &quot;publish.success&quot;))
}</code></pre></dd>
</dl>
<h2><a href="#scheduleperiodically" name="scheduleperiodically" class="anchor"><span class="anchor-link"></span></a>schedulePeriodically</h2>
<p>This API allows to schedules a task to execute periodically at the given interval. The task is executed once at the given start time followed by execution of task at each interval. This returns a handle to cancel the execution of further tasks.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L74-L76" target="_blank" title="Go to snippet source"></a><code class="language-kts">schedulePeriodically(utcTimeNow(), 5.seconds) {
    publishEvent(SystemEvent(&quot;lgsf&quot;, &quot;publish.success&quot;))
}</code></pre></dd>
</dl>
<h2><a href="#scheduleperiodicallyfromnow" name="scheduleperiodicallyfromnow" class="anchor"><span class="anchor-link"></span></a>schedulePeriodicallyFromNow</h2>
<p>This API allows to schedules a task to execute periodically at the given interval. This API takes time duration after which task will be scheduled once followed by execution of task at each interval. Following example shows scheduling task after 1 hour from current utc time and then executing it periodically at 10 seconds interval. This returns a handle to cancel the execution of further tasks.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts#L80-L82" target="_blank" title="Go to snippet source"></a><code class="language-kts">schedulePeriodicallyFromNow(1.hours, 10.seconds) {
    publishEvent(SystemEvent(&quot;lgsf&quot;, &quot;publish.success&quot;))
}</code></pre></dd>
</dl>
<h1><a href="#source-code-for-above-examples" name="source-code-for-above-examples" class="anchor"><span class="anchor-link"></span></a>Source code for above examples</h1>
<ul>
  <li><a href="https://github.com/tmtsoftware/esw/tree/master/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/timeServiceDslExample.kts">Time Service Example Script</a></li>
</ul>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw/tree/master/docs/src/main/sequencer/scripts/dsl/services/time-service.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.0*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../../sequencer/scripts/dsl/dsl.html" title="High Level DSL" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
High Level DSL
</span>
</div>
</a>
<a href="../../../../sequencer/scripts/dsl/loop.html" title="Loop" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Loop
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../../."}})</script>
<script type="text/javascript" src="../../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
