<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../../assets/tmt_favicon.ico">
<title>Defining A Script Â· TMT Executive Software Documentation</title>
<link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../lib/prettify/prettify.css">
<script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../../../assets/custom.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../index.html" title="TMT Executive Software Documentation" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Executive Software Documentation
</span>
<span class="md-header-nav__topic">
Defining A Script
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../index.html" title="TMT Executive Software Documentation" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../../../index.html" title="TMT Executive Software Documentation">
TMT Executive Software Documentation
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/esw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/esw
</div>
</a>

</div>
<ul>
  <li><a href="../../../esw/eswOverview.html" class="page">Executive Software Overview</a></li>
  <li><a href="../../../sequencersandscripts/seq-index.html" class="page">Sequencers and Sequence Components</a>
  <ul>
    <li><a href="../../../sequencersandscripts/sequencer.html" class="page">Sequencers in the Executive Software</a></li>
    <li><a href="../../../sequencersandscripts/sequencer-app.html" class="page">Running a Sequencer Using esw-ocs-app</a></li>
  </ul></li>
  <li><a href="../../../scripts/scripts-index.html" class="page">Sequencer Scripts</a>
  <ul>
    <li><a href="../../../scripts/script-styles.html" class="page">Sequencer Script Styles</a></li>
    <li><a href="../../../scripts/dsl/script-constructs.html" class="page">Script DSL Constructs</a></li>
    <li><a href="../../../scripts/dsl/csw-services.html" class="page">CSW Services DSL</a></li>
  </ul></li>
  <li><a href="../../../uisupport/uisupp-index.html" class="page">User Interface Support</a>
  <ul>
    <li><a href="../../../uisupport/UIOverview.html" class="page">User Interfaces in ESW and TMT</a></li>
    <li><a href="../../../uisupport/gatewayUI-template.html" class="page">Using the Gateway-only UI Template and Tutorial</a></li>
    <li><a href="../../../uisupport/webapp-template.html" class="page">Using the Web Application Template and Tutorial</a></li>
    <li><a href="../../../uisupport/gateway.html" class="page">User Interface Gateway</a></li>
  </ul></li>
  <li><a href="../../../technical/apps/apps-index.html" class="page">ESW Applications</a>
  <ul>
    <li><a href="../../../technical/apps/getting-apps.html" class="page">Getting and Running ESW Applications</a></li>
    <li><a href="../../../technical/apps/esw-shell.html" class="page">ESW Shell - A Testing Environment for ESW and CSW</a></li>
    <li><a href="../../../technical/apps/sequence-manager-app.html" class="page">Starting the Sequence Manager Application</a></li>
    <li><a href="../../../technical/apps/agent-service-app.html" class="page">The Agent Service Application</a></li>
    <li><a href="../../../technical/apps/agent-app.html" class="page">The Agent Application</a></li>
    <li><a href="../../../uisupport/gateway-app.html" class="page">Running the UI Gateway App</a></li>
    <li><a href="../../../technical/apps/esw-services.html" class="page">Running Multiple ESW Applications with esw-services</a></li>
    <li><a href="../../../technical/apps/eng-ui.html" class="page">ESW OCS Engineering User Interface User Manual</a></li>
  </ul></li>
  <li><a href="../../../technical/tech-index.html" class="page">Technical Design Documents</a>
  <ul>
    <li><a href="../../../technical/sequence-manager-tech.html" class="page">Sequence Manager Technical Documentation</a></li>
    <li><a href="../../../technical/sequencer-tech.html" class="page">Sequencer Technical Documentation</a></li>
    <li><a href="../../../technical/sequence-component-tech.html" class="page">Sequence Component Technical Documentation</a></li>
    <li><a href="../../../technical/gateway-tech.html" class="page">Gateway Technical Documentation</a></li>
    <li><a href="../../../technical/agent-service-tech.html" class="page">Agent Service and Agent Technical Documentation</a></li>
    <li><a href="../../../technical/esw-application-parts.html" class="page">ESW Application Architecture</a></li>
    <li><a href="../../../technical/contracts.html" class="page">Service Contracts</a></li>
    <li><a href="../../../technical/testing-philosophy.html" class="page">OSW Testing Philosophy</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../scripts/dsl/constructs/define-script.html#defining-a-script" class="header">Defining A Script</a>
  <ul>
    <li><a href="../../../scripts/dsl/constructs/define-script.html#handler-oriented-script" class="header">Handler-Oriented Script</a></li>
    <li><a href="../../../scripts/dsl/constructs/define-script.html#state-machine-oriented-script-fsm-script-" class="header">State Machine-Oriented Script (FSM Script)</a></li>
    <li><a href="../../../scripts/dsl/constructs/define-script.html#reusable-scripts" class="header">Reusable Scripts</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.5.1
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../scripts/dsl/constructs/define-script.html#defining-a-script" class="header">Defining A Script</a>
  <ul>
    <li><a href="../../../scripts/dsl/constructs/define-script.html#handler-oriented-script" class="header">Handler-Oriented Script</a></li>
    <li><a href="../../../scripts/dsl/constructs/define-script.html#state-machine-oriented-script-fsm-script-" class="header">State Machine-Oriented Script (FSM Script)</a></li>
    <li><a href="../../../scripts/dsl/constructs/define-script.html#reusable-scripts" class="header">Reusable Scripts</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#defining-a-script" name="defining-a-script" class="anchor"><span class="anchor-link"></span></a>Defining A Script</h1>
<p>There are 3 variations of Sequencer Scripts. These variations are based the way the Script gets executed. The variations are:</p>
<ul>
  <li>Handler-Oriented Script</li>
  <li>State Machine-Oriented Script (FSM Script)</li>
  <li>Reusable Script</li>
</ul>
<h2><a href="#handler-oriented-script" name="handler-oriented-script" class="anchor"><span class="anchor-link"></span></a>Handler-Oriented Script</h2>
<p>A handler-oriented script is a collection of <a href="handlers.html">script handlers</a> which execute the actions tied to a command. To define a handler-oriented script, a function named <code>script</code> needs to be invoked with a code <em>block</em> which contains the logic of the script. The example below shows the way to declare the script.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L16-L32" target="_blank" title="Go to snippet source">source</a><code class="language-kts">import esw.ocs.dsl.core.script
import esw.ocs.dsl.highlevel.models.Major

script {
    // place to add Sequencer Script logic
}</code></pre></dd>
</dl>
<p>The logic can be divided into 2 parts:</p>
<ul>
  <li>Top-level statements (initialization logic): Executed while loading (initializing) the script.</li>
  <li>Script Handlers: Executed when a command to execute a particular handler is received.</li>
</ul>
<p><a href="handlers.html">Script handlers</a> are defined to process a Sequence of Commands or to perform actions like going online or offline, starting a diagnostic mode etc. Documentation of handlers can be found <a href="handlers.html">here</a>. Handlers will be executed whenever the Sequence or outside client makes a request to perform an action on the Sequencer.</p>
<p>Everything except Script Handlers are considered as top-level statements and will be executed while loading the script. This is the place to <strong>declare the Script specific variables</strong> and tasks to be executed at initialization of the Script.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L36-L78" target="_blank" title="Go to snippet source">source</a><code class="language-kts">script {
    info(&quot;Loading DarkNight script&quot;)

    var tromboneTemperature = 0.0
    onEvent(&quot;nfiraos.tromboneAssembly.temperature&quot;) { event -&gt;
        when (event) {
            is SystemEvent -&gt; {
                tromboneTemperature = event(doubleKey(&quot;temperatureInCelsius&quot;)).first
            }
        }
    }

    val tromboneTemperatureAlarm =
            Key.AlarmKey(Prefix(NFIRAOS, &quot;trombone&quot;), &quot;tromboneMotorTemperatureAlarm&quot;)

    loopAsync(10.seconds) {
        if (tromboneTemperature &gt; 10.0) {
            setSeverity(tromboneTemperatureAlarm, Major)
        } else  {
            setSeverity(tromboneTemperatureAlarm, Okay)
        }
    }

    onSetup(&quot;basic-setup&quot;) { command -&gt;

        val intKey = intKey(&quot;angle&quot;)
        val angle = command.parameter(intKey).head()!!

        info(&quot;moving motor by : $angle&quot;)
        moveMotor(angle)
        info(&quot;motor moved to required position&quot;)
    }

    onObserve(&quot;start-observation&quot;) {
        info(&quot;opening the primary shutter to start observation&quot;)

        val openingStatusKey = stringKey(&quot;status&quot;).set(&quot;open&quot;)
        publishEvent(SystemEvent(&quot;IRIS.primary_shutter&quot;, &quot;current-status&quot;, openingStatusKey))

        openPrimaryShutter()
    }

}</code></pre></dd>
</dl>
<p>The example mainly demos:</p>
<ul>
  <li>Top-level statements like declaring Script specific variable (*tromboneTemperature*, <em>tromboneTemperatureAlarm</em>) , use of <a href="../script-constructs.html">Script Constructs</a> (*loopAsync*) and use of <a href="../csw-services.html">Csw Services</a> (*info* - <a href="../services/logging-service.html">Logging Service</a>, <em>setSeverity</em> - <a href="../services/alarm-service.html">Alarm Service</a>)</li>
  <li>Defining <a href="handlers.html">Script Handlers</a> like <em>onSetup</em> and <em>onObserve</em></li>
</ul>
<h2><a href="#state-machine-oriented-script-fsm-script-" name="state-machine-oriented-script-fsm-script-" class="anchor"><span class="anchor-link"></span></a>State Machine-Oriented Script (FSM Script)</h2>
<p>FSM script is a way of writing a Sequencer Script as a <a href="https://en.wikipedia.org/wiki/Finite-state_machine" title="Finite State Machine (FSM)">Finite State Machine (FSM)</a>, where execution of Script Handler is dependent on the current state of the Sequencer Script. </p>
<p>To define FSM Script a function <code>FSMScript</code> needs to be called with the <em>initial state</em> of the script, and a block containing the Script logic. The block contains initialization logic for different states.</p>
<p>In an FSM Script, script handlers can be defined in two scopes :</p>
<ul>
  <li>Default scope - top-level scope of the Script</li>
  <li>State scope - scope of a specific state.</li>
</ul>
<p>The below code shows how to declare FSM Script and States. It also shows the scopes where handlers can be added.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L10-L99" target="_blank" title="Go to snippet source">source</a><code class="language-kts">import esw.ocs.dsl.core.FsmScript

FsmScript(&quot;INIT&quot;) {

    // Default scope
    // place for Script variable declarations and initialisation statements

    state(&quot;INIT&quot;) { params -&gt;
        // Scope of INIT state
        // handlers of INTI state
    }

    state(&quot;IN-PROGRESS&quot;) {
        // Scope of IN-PROGRESS state
        // handlers of IN-PROGRESS state
    }

}</code></pre></dd>
</dl>
<p>Initialization of the Script takes place by executing the top-level statements, and then executing the <em>initial state</em>. The <strong>top-level scope is the place to declare variables</strong> which can be used across all states in the Script. </p>
<p>While defining handlers there are some restrictions about <a href="handlers.html#command-handlers">Command handlers</a> and where they can be defined in the FSM script scope. <a href="handlers.html">Script handlers</a> other than the Command handlers can be tied both scopes of FSM script.</p>
<p>To execute any action, the corresponding handlers in the current state scope will be executed first and then handlers in the Default scope, if any, will be executed. In case of a Command Sequence, if the current state does not handle the Command which is being executed, the Sequence will be completed with an Error with a <code>UnhandledCommandException</code> reason.</p>
<p>For state transitions, <code>become</code> needs to called from the current state with the <em>next state</em> as an argument. It will start evaluating and executing future actions in the next state. If the <em>next state</em> is not defined in the Script, then an exception will be thrown saying <em>No state declaration found for state</em>.</p>
<p>It is also possible to pass parameters from the current state to the next state by passing them as the last argument to the <em>become</em> function. The passed parameters will be available as a function parameter while defining any State. This can reduce the need for global variables.</p>
<p>In below example, <code>[[ 1 ]]</code> shows use of <code>become</code> to change state. where <code>[[ 2 ]]</code> shows how to pass Params while changing state. The ON state shows how to consume the Params.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L109-L123" target="_blank" title="Go to snippet source">source</a><code class="language-kts">state(&quot;ON&quot;) { params -&gt;

    onSetup(&quot;turn-off&quot;) {
        turnOffLight()
        become(&quot;OFF&quot;)                           // [[ 1 ]]
    }
}

state(&quot;OFF&quot;) {

    onSetup(&quot;turn-on&quot;) { command -&gt;
        turnOnLight()
        become(&quot;ON&quot;, command.params)           // [[ 2 ]]
    }
}</code></pre></dd>
</dl>
<p>The <code>state</code> scope can have top-level statements and Script handlers. The <code>state</code>&rsquo;s top-level statements will be executed when state transition happens. So invoking <em>become</em> will initialize the next state which includes calling the top-level statements. The <code>state</code> top-level can be used to declare variables limited to the scope of the state which will last until state transition. After that, the state will be cleared, and the next time the FSM becomes that state, it will be initialized again to default values. </p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L130-L150" target="_blank" title="Go to snippet source">source</a><code class="language-kts">state(&quot;SETTING-UP&quot;) { params -&gt;

    val initialPos = params[intKey(&quot;current-position&quot;)].get().head()
    var moved = false

    onSetup(&quot;move&quot;) { command -&gt;
        val angle = command.params[intKey(&quot;angle&quot;)].get().head()
        moveBy(angle)
        moved = true

        info(&quot;moved from : $initialPos by angle : $angle&quot;)

        become(&quot;READY&quot;)
    }

    onGoOffline {
        stopSetup()
        info(&quot;Going in offline mode&quot;)
    }

}</code></pre></dd>
</dl>
<p>In the example, <code>initialPos</code> and <code>moved</code> demonstrate declaring State scoped variables. Whenever state transition happens to some other state and the goes back to the <code>SETTING-UP</code> state, these variables will be reinitialized to their default values as defined in code. <em>A transition to self will not reinitialize variables</em>. </p>
<h2><a href="#reusable-scripts" name="reusable-scripts" class="anchor"><span class="anchor-link"></span></a>Reusable Scripts</h2>
<p>Reusable Scripts make it possible to write any <strong>common logic that can shared across multiple scripts</strong>. This can be used to create small building blocks for constructing Sequencer Scripts (although this does cause dependencies that reduce a script&rsquo;s ability to stand alone). They cannot be directly loaded into a Sequence Component; they can only be loaded into other Sequencer Scripts.</p>
<p>Reusable Scripts may consist of Script handlers or the top-level statements (initialization logic). The top-level statements will be executed while loading the script. Script handlers will be added to the corresponding handlers of the script loading it.</p>
<p>THe following code declares a Reusable Script with an Observe Command Handler.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L13-L168" target="_blank" title="Go to snippet source">source</a><code class="language-kts">import esw.ocs.dsl.core.reusableScript

val startObservationScript = reusableScript {
    onObserve(&quot;start-observation&quot;) {
        info(&quot;opening the primary shutter to start observation&quot;)

        val openingStatusKey = stringKey(&quot;status&quot;).set(&quot;open&quot;)
        publishEvent(SystemEvent(&quot;IRIS.primary_shutter&quot;, &quot;current-status&quot;, openingStatusKey))

        openPrimaryShutter()
    }

}</code></pre></dd>
</dl>
<h3><a href="#loading-in-a-handler-oriented-script" name="loading-in-a-handler-oriented-script" class="anchor"><span class="anchor-link"></span></a>Loading in a Handler-Oriented Script</h3>
<p>To use Reusable Scripts, a Handler-Oriented script needs to call the <code>loadScripts</code> function with the instance of Reusable Script. Calling <em>loadScripts</em> will initialize the Reusable Script and then combine handlers of both scripts.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L172-L176" target="_blank" title="Go to snippet source">source</a><code class="language-kts">script {

    loadScripts(startObservationScript)

}</code></pre></dd>
</dl>
<h3><a href="#loading-in-fsm-script" name="loading-in-fsm-script" class="anchor"><span class="anchor-link"></span></a>Loading in FSM Script</h3>
<p>A Reusable Script cannot be directly imported at the top-level of an FSM script. It can only be imported in a particular State of the FSM script. THe <code>loadScripts</code> command, and the logic from the loaded script is limited to that particular State. The example below shows loading a reusable script into a State.</p>
<dl>
  <dt>Kotlin</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/examples/src/main/kotlin/esw/ocs/scripts/examples/paradox/DefineScriptExample.kts#L183-L187" target="_blank" title="Go to snippet source">source</a><code class="language-kts">state(&quot;INIT&quot;) { params -&gt;

    loadScripts(startObservationScript)

}</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw/tree/3a739bcde566b0416faa59f9fb860b7dfd6cabe0/docs/src/main/scripts/dsl/constructs/define-script.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.5.1
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../scripts/dsl/script-constructs.html" title="Script DSL Constructs" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Script DSL Constructs
</span>
</div>
</a>
<a href="../../../scripts/dsl/constructs/handlers.html" title="Script Handlers" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Script Handlers
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../."}})</script>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
