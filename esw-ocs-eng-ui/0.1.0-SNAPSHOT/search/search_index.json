{"docs":[{"location":"/paradox.json","text":"","title":""},{"location":"/index.html","text":"","title":"ESW-OCS-ENG-UI"},{"location":"/index.html#esw-ocs-eng-ui","text":"OCS Engineering User Interface User Manual Highlights Getting started Prerequisites Run the ESW-OCS-ENG-UI Application in Local Environment Required file configuration for an ObsMode Process Flow Spawn Sequence Manager Provision Sequence Components Configure Observation Manage Observation Manage Sequencers Tracking Sequence Resources Page Login and Home Page Login Home Page Manage Infrastructure Page Provision Unprovision Start Sequencer Configure Manage Observation Page Running Configurable Non-Configurable Tracking Sequence Manage Sequencer Page Loading a Sequence Starting a sequence Pause and Resume Sequence Sequence Step Features Stop Sequence Abort Sequence Resources\nTo get started with pre-requisites go to Getting Started Page.","title":"ESW-OCS-ENG-UI"},{"location":"/UI_overview.html","text":"","title":"OCS Engineering User Interface"},{"location":"/UI_overview.html#ocs-engineering-user-interface","text":"TMT Observatory will use many web applications to observe and manage the observatory instruments and telescope systems. The TMT User interfaces can be grouped into two categories: observing user interfaces and engineering user interfaces. For the user interfaces, browser-based UI will provide an easy solution for remote access to systems and services.\nThe esw-ocs-eng-ui provides a browser based User Interface to manage and track sequences in different observing mode. It also provides features like running parallel observation in different observation modes by checking for any resource conflict.\nUI has been developed based on the below technologies:\nReact Ant Design React Testing Library","title":"OCS Engineering User Interface"},{"location":"/UI_overview.html#user-manual-highlights","text":"This manual aims at helping users understand how this User Interface works and its different features.\nGetting started which describes the basic setup required to run this user interface on a browser. Process Flow describes the user process flow to work in the UI. Login and Home Page explains login procedure and functionalities on the home page. Manage Infrastructure shows the agents started on different machines and describes how to provision, configure sequence components. Manage Observation is where the sequences can be tracked for different observing modes. It also shows in-use, configurable and non-configurable resources Manage Sequencer is where sequence can be loaded, started, paused and resumed. Once sequence is loaded, other important features get enabled as explained in this page of the manual. Resources shows the resources and sequence components in-use and unavailable.","title":"User Manual Highlights"},{"location":"/Getting-started.html","text":"","title":"Getting started"},{"location":"/Getting-started.html#getting-started","text":"","title":"Getting started"},{"location":"/Getting-started.html#prerequisites","text":"The v15.x version of Node.js must be installed.","title":"Prerequisites"},{"location":"/Getting-started.html#required-backend-services-components","text":"Location Service Auth Service - user with esw-user role is required Agent Service One or more agents should be up and running.","title":"Required backend services/components"},{"location":"/Getting-started.html#running-backend-services-locally","text":"csw-services should be up & running. using sbt shell inside CSW csw-services/run start -k -c. The latest binaries of ESW need to be present on machine with 0.1.0-SNAPSHOT version. run sbt publishLocal inside ESW sbt shell. Note: This step needs to be done atleast once and/or whenever new changes of esw are pulled from github. Start esw services\nOCS-ENG-UI requires AgentService along with one or more agent should be up & running to manage observations on various agent/machine. To start, run following command inside ESW sbt shell esw-services/run start --agent --agent-service. Sequence manager could be started from UI. However, Sometimes you may want to work in a simulation environment & to start a simulated Sequence Manager, use esw-services/run start --agent-service -s --simulation Alternatively, You can use esw-services/run start-eng-ui-services command to start all the required services and agents required to test the observation scripts written in repo sequencer-scripts/ui-setup branch.","title":"Running backend services locally"},{"location":"/Getting-started.html#run-the-esw-ocs-eng-ui-application-in-local-environment","text":"Run following commands in the terminal.\nnpm install\n  npm start","title":"Run the ESW-OCS-ENG-UI Application in Local Environment"},{"location":"/Getting-started.html#required-file-configuration-for-an-obsmode","text":"The following configuration files with testing data are added for you in config service when you start esw-services with start-eng-ui-services flag.\nsbt:shell> esw-services/run start-eng-ui-services\nWhen you would want to configure an ObsMode other than the one’s present in ui-setup branch, follow the steps to configure required files for setting up new ObsModes.\nversion.conf at path /tmt/osw/version.json provisionConf.conf at path /tmt/esw/smProvisionConfig.conf smObsModeConf.conf : sequence manager takes path argument.\nFor example, lets say you want to start an ESW-Darknight observation and it requires 2 resources & Sequencers, Namely ESW & TCS.\nFollowing are the configuration files required to start an observation using esw-ocs-eng-ui.\nFirst, we must have sequencer scripts written in kotlin for both the sequencers, need to be present in sequencer-script repo. These scripts are assumed to be written in such a way that they would perform actions on recieving pre-defined commands. Version file is used by agent service to spawn sequence manager & sequence components while provisioning with appropriate versions. This file need to be saved at /tmt/osw/version.conf with the following json content.\n{\n  \"scripts\": $scriptVersion,\n  \"esw\": $eswVersion\n}\nNext, we need to save smObsModeConfig.conf file in config service containing information related to ESW-Darknight while starting sequence manager. Sequence manager uses this information to configure an observation,i.e start sequencers on provisioned sequence components.\nesw-sm {\n  obsModes: {\n    IRIS_Darknight: {\n      resources: [ESW, TCS]\n      sequencers: [ESW, TCS]\n    }\n  }\n}\nFor provisioning, Sequence manager needs a provision config containing information on how many sequence components to start on running agents/machines. This file needs to present at this path /tmt/esw/smProvisionConfig.conf in config service.\nesw-sm {\n  provision {\n    ESW: 2\n    IRIS: 1\n  }\n}\nTo learn how to save a file in config service, visit here.\nFollow along the guide to on user process flow to start and manage observation on UI here.","title":"Required file configuration for an ObsMode"},{"location":"/UI_processflow.html","text":"","title":"Process Flow"},{"location":"/UI_processflow.html#process-flow","text":"After following all steps as explained in page - Getting Started, you should be able to see Login Page on the browser.\nLog in as an authenticated user with credentials specified here.\nOnce Login is successful, user shall be able to follow the below steps to manage an observation in the User Interface.","title":"Process Flow"},{"location":"/UI_processflow.html#spawn-sequence-manager","text":"Sequence Manager manages the configurations of Sequence Components using the observation mode. It helps in executing multiple Sequences concurrently. It also prevents resource conflicts when running sequences simultaneously. It can start , monitor and shutdown Sequence Components. Sequence Manager also determines which resources are required to execute a sequence. Hence it is mandatory that the Sequence Manager should be up and running on a machine. If Sequence Manager hasn’t been started then on the Home Page, user can click on ‘Spawn’ Button to start Sequence Manager as explained here\nNote To understand states of Sequence Manager please visit here","title":"Spawn Sequence Manager"},{"location":"/UI_processflow.html#provision-sequence-components","text":"Once the Sequence Manager has been spawned, now user can provision Sequence Components per Agent. As explained here the user can specify the number of sequence component to be spawned per agent.\nNote To know more about Provision functionality Read Here","title":"Provision Sequence Components"},{"location":"/UI_processflow.html#configure-observation","text":"Once the Sequence Components are provisioned, Sequence Manager can take the configure step. Configure is used for starting Sequencers needed for an observing mode. Unless there is a conflict in the resources required for observation, TMT can run multiple observation at a time. The Configure feature hence checks for any resource conflicts with ongoing observations. User can configure from either Manage Infrastructure or the Manage Observation page of the UI.\nNote To know more about Configure Functionality visit here\nUser can also shutdown the running observation as explained here and configure another sequencer.","title":"Configure Observation"},{"location":"/UI_processflow.html#manage-observation","text":"To manage an observation, user can go to Manage Observation page.\nHere user can see three tabs : Running, Configurable and Non-Configurable.\nIn the Running tab as explained here user can\nConfigure Sequencers Shutdown running observation Track running Sequencers and sequences as explained here Reload Script by stopping and restarting the sequencer. View resources in use or available.\nIn the Configurable tab as explained here user can view the resources available and also configure them using ‘Configure’ button.\nIn the Non-Configurable tab as explained here users can see resources in use and unavailable sequence components.","title":"Manage Observation"},{"location":"/UI_processflow.html#manage-sequencers","text":"Once Sequencers have been configured, user can go to Manage Sequencer page by clicking on gear icon next to name of the Sequencer.","title":"Manage Sequencers"},{"location":"/UI_processflow.html#load-sequence","text":"User can then Load Sequence as explained here. Once sequence is loaded, user should be able to see the each command as a step. Clicking on each steps should show the parameter table on the right.","title":"Load Sequence"},{"location":"/UI_processflow.html#go-online-go-offline","text":"User can use Go Online/Go Offline functionality to change status of the sequencer to Online/ Offline. No Sequence can run on a sequencer which is in offline state.","title":"Go Online/Go Offline"},{"location":"/UI_processflow.html#start-pause-resume-sequence","text":"Once Sequencer is Online and Loaded, user can start the sequence by clicking on start button as explained here. Once sequencer is started, the icon will change to Pause icon and also the first step will be in green color.\nSequence can be paused/resumed as explained here.","title":"Start, Pause/Resume Sequence"},{"location":"/UI_processflow.html#stop-abort-sequence","text":"Once sequence starts executing, following buttons get activated\nStop Sequence - This feature is used to clear/save Sequencer state before stopping. Abort Sequence - This feature is used to clean up tasks before aborting. Sequence is aborted in any case at the end.","title":"Stop, Abort Sequence"},{"location":"/UI_processflow.html#step-functionalities","text":"Once sequence is loaded and when sequence starts executing, each Step in the sequence offers the below features. Click on any of feature below to understand how to do it in UI.\nInsert/remove breakpoint Add Steps Delete Steps Duplicate Step","title":"Step Functionalities"},{"location":"/UI_processflow.html#tracking-sequence","text":"Once the sequence is executing or completed, user can track status of the sequence or the steps completed in Manage Observation page as explained here.","title":"Tracking Sequence"},{"location":"/UI_processflow.html#resources-page","text":"Resource page displays the list of Sequencer Subsystem, their status and the observation mode that they are running on.","title":"Resources Page"},{"location":"/Login_HomePage.html","text":"","title":"Login and Home Page"},{"location":"/Login_HomePage.html#login-and-home-page","text":"","title":"Login and Home Page"},{"location":"/Login_HomePage.html#login","text":"The below image shows a snapshot of the login screen :\nTo access the Engineering UI portal, the user has to login with roles and credentials as specified below.","title":"Login"},{"location":"/Login_HomePage.html#authorisation","text":"For testing purposes, we are creating osw-user1, esw-user1 & tcs-user1 users while launching the Keycloak from csw-services\nTesting Purpose user-role osw-user can be used.\nUsername: osw-user1         Password: osw-user1\nFor Auth Service esw-user role is required.\nUsername: esw-user1         Password: esw-user1","title":"Authorisation"},{"location":"/Login_HomePage.html#home-page","text":"Once login happens successfully the user should be able to see the below screen :","title":"Home Page"},{"location":"/Login_HomePage.html#spawn-shutdown-the-sequence-manager","text":"This page shows a button to Spawn/Shutdown the Sequence Manager.\nIf Sequence Manager is spawned with agents then it shows label ‘Shutdown’ for the Sequence Manager.\nClicking on ‘Shutdown’ button asks for confirmation before shutting down the Sequence Manager.\nOnce Sequence Manager is shutdown then label changes to ‘Spawn’ and message of successful shutdown is displayed.\nAfter clicking on ‘Spawn’ button, select an agent to run Sequence Manager on.\nClicking on one of the agents, spawns Sequence Manager on that machine.","title":"Spawn/Shutdown the Sequence Manager"},{"location":"/Login_HomePage.html#home-page-also-shows-tabs-for-links-to","text":"Manage Infrastructure Manage Observations Resources","title":"Home Page also shows tabs for links to"},{"location":"/ManageInfrastructure.html","text":"","title":"Manage Infrastructure Page"},{"location":"/ManageInfrastructure.html#manage-infrastructure-page","text":"This page shows status of Sequence Manager running on different machines like SM or agent. It displays information that Sequence Manager is running on ESW machine. It shows in blocks, agents on every machine that will host Sequence Components and Sequencers and HCD/Assembly components on respective subsystem machines.\nTo add a Sequence Component to an Agent box, click on + sign on that agent block.","title":"Manage Infrastructure Page"},{"location":"/ManageInfrastructure.html#provision","text":"Provision button on this page when clicked on displays the below dialog box where the user can enter the number of Sequence Component per Agent to be spawned for that particular Agent.\nWhile provisioning, the API shuts down currently running Sequence Components before spawning new one.\nNote To know more about Provision functionality Visit Here\nOnce provision happens successfully, message is displayed or else error is displayed on the screen.","title":"Provision"},{"location":"/ManageInfrastructure.html#unprovision","text":"Once the agents are provisioned with Sequence Components, label on provision button changes to ‘Unprovision’.\nUnprovision can also be done after ‘Configure’\nClick on Unprovision button to stop all Sequence Components.\nUnprovision happens successfully and all Sequence Components are shutdown.","title":"Unprovision"},{"location":"/ManageInfrastructure.html#start-sequencer","text":"When Provision call is completed, Start Sequencer button is enabled.\nClick on Start Sequencer Button to see the below dialog box.\nSelect a subsystem and Obs-Mode to start the Sequencer.\nAfter selecting Subsystem and Obs-Mode, Sequencer will be started.\nClick : on the Agent card with the started Sequencer to see the options available\nStop Sequencer Reload Script Shutdown Sequencer","title":"Start Sequencer"},{"location":"/ManageInfrastructure.html#stop-sequencer","text":"Click on Stop Sequencer to stop that particular Sequence Component.","title":"Stop Sequencer"},{"location":"/ManageInfrastructure.html#reload-script","text":"Click on Reload Script to load Script for the Sequence Component.","title":"Reload Script"},{"location":"/ManageInfrastructure.html#shutdown-sequencer","text":"Click on Shutdown Component and a confirmation dialog box comes up.","title":"Shutdown Sequencer"},{"location":"/ManageInfrastructure.html#configure","text":"When provision call is completed successfully, Configure button is enabled in Manage Infrastructure and Manage Observation page.\nOn clicking the Configure button, list of the Observation Mode are displayed. User can select one of them.\nNote To know more about Configure Functionality visit here\nThe below figure shows that the Sequence Components were configured successfully.\nConfigure can also be done from Manage Observation Page","title":"Configure"},{"location":"/ManageObservation.html","text":"","title":"Manage Observation Page"},{"location":"/ManageObservation.html#manage-observation-page","text":"After Configuration is successful the Manage Observation shows the following three tabs.","title":"Manage Observation Page"},{"location":"/ManageObservation.html#running","text":"This tab shows the list of Sequencers that are currently running and their status.\nIt also shows information about resources in use.\nClicking on gear next to name of sequencers redirects to Manage Sequencer Page","title":"Running"},{"location":"/ManageObservation.html#shutdown-sequencer","text":"Clicking on Shutdown button on top right corner leads to shutdown of all sequencers listed below.","title":"Shutdown Sequencer"},{"location":"/ManageObservation.html#reload-script","text":"During execution of sequence, Script can be reloaded.\nClick on Reload Script against each Sequencers helps in reloading specific script for that sequencer.\nOn clicking on Reload Script against each sequence, it will ask for a confirmation before proceeding.\nOnce confirmation is given then it will reload the script by stopping and restarting the sequencer.","title":"Reload Script"},{"location":"/ManageObservation.html#configurable","text":"This tab shows list of resources that are available for configuring.\n.\nClicking on Configure button in this Tab serves same purpose of Configure Button in Manage Infrastructure Page.","title":"Configurable"},{"location":"/ManageObservation.html#non-configurable","text":"This tab shows list of resources that are not available for configuring and are in use.\nIt also display information regarding unavailable sequence components.","title":"Non-Configurable"},{"location":"/ManageObservation.html#tracking-sequence","text":"This page will also be used to track the sequence while execution. It will display the current status of the running sequences against each sequencer.\nFor example : When a sequence is paused the status of that sequence will show in the Manage Observation page for that sequencer as paused.\nSimilarly all the Sequencers will show different status like\nLoaded Idle/Online In Progress Offline Killed\nNote To read more about the above steps in Sequencer Lifecycle Click here\nAt the end of sequence, the status will show ‘All Steps Completed’ or the number of steps completed for each sequencer.\nTo know more about Sequence Completion read here\nRead about the Manage Sequencer here","title":"Tracking Sequence"},{"location":"/ManageSequencer.html","text":"","title":"Manage Sequencer Page"},{"location":"/ManageSequencer.html#manage-sequencer-page","text":"Manage Sequencer Page provides functionalities like\nLoading a Sequence Starting loaded sequence Stopping loaded sequence Pause and Resume loaded sequence Aborting running sequence Adding, Duplicating, Inserting/Removing Breakpoint and Deleting steps in a sequence Displays Parameter for each step in the execution","title":"Manage Sequencer Page"},{"location":"/ManageSequencer.html#loading-a-sequence","text":"Click on Load Sequence button which will open up a dialog box to load sequence in .json format from local disk.\nOnce sequence is loaded, Status message below ‘Sequence Steps’ changes to ‘Loaded’ and Go Offline button is enabled.\nIt shows list of steps in Orange color. Clicking on each step shows the Command and its information like Source, Obs-id, Type and Parameters.","title":"Loading a Sequence"},{"location":"/ManageSequencer.html#go-offline-go-online","text":"Go offline button is enabled when sequence is loaded.\nOnce this button is clicked, the sequencer goes offline.\nOnce Sequencer is offline, ‘Go offline’ label is replaced by ‘Go online’ label on the button. Click on ‘Go Online’ button to go make sequencers go online again.\nTo read about Go offline and Go Online functionality visit here","title":"Go Offline, Go Online"},{"location":"/ManageSequencer.html#starting-a-sequence","text":"Click on play button next to ‘Sequence Steps’ to start a sequence.\nOnce a sequence is started, First step in the sequence of steps is visible in green color.\nStop Sequence and Abort Sequence Button are enabled and Load Sequence and Go Offline button are disabled.\nOnce Sequence is started, steps cannot be deleted and breakpoint cannot be inserted while sequence is in execution. Sequence has to be paused.","title":"Starting a sequence"},{"location":"/ManageSequencer.html#pause-and-resume-sequence","text":"When Sequence is in progress, pause button can be used to pause the sequence at current step. Once sequence is paused, message will be displayed and pause icon will change to resume icon.\nWhen Sequence is paused, resume button can be used to resume the sequence from the paused step. Once resumed, sequence will start executing again and pause icon will again be enabled instead of resume icon.","title":"Pause and Resume Sequence"},{"location":"/ManageSequencer.html#sequence-step-features","text":"Select : icon on any of the steps to view actions on each step.","title":"Sequence Step Features"},{"location":"/ManageSequencer.html#insert-and-remove-breakpoint","text":"Click on : for the step where breakpoint needs to be inserted.Select ‘Insert Breakpoint’ Option.\nOnce breakpoint is inserted on the step, the sequence will pause at that step.\nSequence pauses at the step where breakpoint was inserted.\nTo Remove inserted breakpoint, go to the step where break point was inserted and click on : to select’Remove Breakpoint’ .\nOnce breakpoint is removed, sequence will resume execution.","title":"Insert and Remove Breakpoint"},{"location":"/ManageSequencer.html#add-step","text":"Once a sequence is loaded, steps can be added. Click on ‘Add Step’ at the step after which more steps have to be added.\nOnce ‘Add Step’ is clicked, it opens dialog box to upload more steps in the sequence as .json file. After file is uploaded, it adds steps to the sequence as shown below.","title":"Add Step"},{"location":"/ManageSequencer.html#duplicate-step","text":"To duplicate multiple steps, Click on icon : on the step to duplicate and then click on ‘Duplicate’.\nMultiple steps can also be selected to duplicate. Select the step and click on Duplicate button at the bottom.\nIf duplication is successful, appropriate message will be displayed.","title":"Duplicate Step"},{"location":"/ManageSequencer.html#delete-step","text":"To Delete a step, click on : on that step and click on ‘Delete’. Pop up box shows up. Now click on ‘Delete’ button to confirm deletion of the step or else press on ‘Cancel’ button to avoid deleting.\nOnce the step is deleted, message is displayed.","title":"Delete Step"},{"location":"/ManageSequencer.html#stop-sequence","text":"To stop a sequence in progress, click on ‘Stop Sequence’ button.\nConfirmation Dialog box pops up .\nClick on ‘Confirm’ button to stop sequencer successfully.\nTo read about Stop Sequence functionality visit here","title":"Stop Sequence"},{"location":"/ManageSequencer.html#abort-sequence","text":"To immediately abort a sequence click on ‘Abort’ Button.\nClick on ‘Confirm’ button on the pop-up box to abort successfully.\nTo read about Abort Sequence functionality visit here","title":"Abort Sequence"},{"location":"/Resources.html","text":"","title":"Resources"},{"location":"/Resources.html#resources","text":"This page shows the list of resources with its status as InUse, Available and also the name of the Sequencer using that Resource.","title":"Resources"}]}