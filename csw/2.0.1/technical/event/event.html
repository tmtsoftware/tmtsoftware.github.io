<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../assets/tmt_favicon.ico">
<title>Event Service Â· TMT Common Software (CSW)</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../lib/prettify/prettify.css">
<script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../index.html" title="TMT Common Software (CSW)" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Common Software (CSW)
</span>
<span class="md-header-nav__topic">
Event Service
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/csw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/csw
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../index.html" title="TMT Common Software (CSW)" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../../index.html" title="TMT Common Software (CSW)">
TMT Common Software (CSW)
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/csw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/csw
</div>
</a>

</div>
<ul>
  <li><a href="../../commons/getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../../commons/create-component.html" class="page">Creating a Component</a></li>
  <li><a href="../../commons/multiple-components.html" class="page">Multiple Components</a></li>
  <li><a href="../../commons/using-alarms.html" class="page">Using Alarms</a></li>
  <li><a href="../../commons/unit-tests.html" class="page">Adding Unit Tests</a></li>
  <li><a href="../../commons/params.html" class="page">Params</a>
  <ul>
    <li><a href="../../params/keys-parameters.html" class="page">Keys and Parameters</a></li>
    <li><a href="../../params/units.html" class="page">Units</a></li>
    <li><a href="../../params/subsystem.html" class="page">Subsystem</a></li>
    <li><a href="../../params/commands.html" class="page">Commands</a></li>
    <li><a href="../../params/events.html" class="page">Events</a></li>
    <li><a href="../../params/states.html" class="page">State Variables</a></li>
    <li><a href="../../params/result.html" class="page">Result</a></li>
  </ul></li>
  <li><a href="../../commons/framework.html" class="page">Framework for creating components (HCD, Assembly, Container)</a>
  <ul>
    <li><a href="../../framework/describing-components.html" class="page">ComponentInfo</a></li>
    <li><a href="../../framework/creating-components.html" class="page">Creating an Assembly or Hcd Component</a></li>
    <li><a href="../../framework/handling-lifecycle.html" class="page">Component Handlers</a></li>
    <li><a href="../../framework/managing-command-state.html" class="page">Managing Command State</a></li>
    <li><a href="../../framework/tracking-connections.html" class="page">Tracking Connections</a></li>
    <li><a href="../../framework/publishing-state.html" class="page">Publishing State</a></li>
    <li><a href="../../framework/handling-exceptions.html" class="page">Handling Exceptions</a></li>
    <li><a href="../../framework/deploying-components.html" class="page">Deploying Components</a></li>
  </ul></li>
  <li><a href="../../commons/command.html" class="page">Communication using Commands</a></li>
  <li><a href="../../commons/logging_aggregator.html" class="page">Logging Aggregator</a></li>
  <li><a href="../../commons/services.html" class="page">Services</a>
  <ul>
    <li><a href="../../services/location.html" class="page">Location Service</a></li>
    <li><a href="../../services/config.html" class="page">Configuration Service</a></li>
    <li><a href="../../services/logging.html" class="page">Logging Service</a></li>
    <li><a href="../../services/event.html" class="page">Event Service</a></li>
    <li><a href="../../services/alarm.html" class="page">Alarm Service</a></li>
    <li><a href="../../services/time.html" class="page">Time Service</a></li>
    <li><a href="../../services/database.html" class="page">Database Service</a></li>
    <li><a href="../../services/aas.html" class="page">Authentication and Authorization Service (AAS)</a></li>
    <li><a href="../../services/sequencer-command-service.html" class="page">Sequencer Command Service</a></li>
  </ul></li>
  <li><a href="../../commons/apps.html" class="page">Applications</a>
  <ul>
    <li><a href="../../apps/cswlocationserver.html" class="page">csw-location-server</a></li>
    <li><a href="../../apps/cswlocationagent.html" class="page">csw-location-agent</a></li>
    <li><a href="../../apps/cswonfigserverapp.html" class="page">csw-config-server</a></li>
    <li><a href="../../apps/cswconfigcli.html" class="page">csw-config-cli</a></li>
    <li><a href="../../apps/csweventcli.html" class="page">csw-event-cli</a></li>
    <li><a href="../../apps/cswalarmcli.html" class="page">csw-alarm-cli</a></li>
    <li><a href="../../apps/hostconfig.html" class="page">csw-host-config</a></li>
  </ul></li>
  <li><a href="../../commons/deployment.html" class="page">Deployment</a>
  <ul>
    <li><a href="../../deployment/env-vars.html" class="page">Environment variables</a></li>
  </ul></li>
  <li><a href="../../commons/testing.html" class="page">Testing</a></li>
  <li><a href="../../commons/sbt-tasks.html" class="page">sbt Tasks</a></li>
  <li><a href="../../commons/manuals.html" class="page">Manuals</a></li>
  <li><a href="../../migration_guide/migration-guides.html" class="page">Migration Guides</a>
  <ul>
    <li><a href="../../migration_guide/migration_guide_1.0.0_to_2.0.0/migration-guide-1.0.0-to-2.0.0.html" class="page">Migration Guide from 1.0.0 to 2.0.0</a></li>
  </ul></li>
  <li><a href="../../commons/contract.html" class="page">CSW Service contract</a></li>
  <li><a href="../../technical/technical.html" class="page">Technical Design Documents</a>
  <ul>
    <li><a href="../../technical/framework/framework.html" class="page">Framework</a></li>
    <li><a href="../../technical/command/command.html" class="page">Command</a></li>
    <li><a href="../../technical/params/params.html" class="page">Params</a></li>
    <li><a href="../../technical/location/location.html" class="page">Location Service</a></li>
    <li><a href="../../technical/configuration/configuration.html" class="page">Configuration Service</a></li>
    <li><a href="../../technical/logging/logging.html" class="page">Logging Service</a></li>
    <li><a href="../../technical/event/event.html" class="active page">Event Service</a></li>
    <li><a href="../../technical/alarm/alarm.html" class="page">Alarm Service</a></li>
    <li><a href="../../technical/time/time.html" class="page">Time Service</a></li>
    <li><a href="../../technical/database/database.html" class="page">Database Service</a></li>
    <li><a href="../../technical/aas/aas.html" class="page">Authentication and Authorization Service</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../technical/event/event.html#event-service" class="header">Event Service</a>
  <ul>
    <li><a href="../../technical/event/event.html#introduction" class="header">Introduction</a></li>
    <li><a href="../../technical/event/event.html#technology-choices" class="header">Technology Choices</a></li>
    <li><a href="../../technical/event/event.html#implementation-details" class="header">Implementation Details</a></li>
    <li><a href="../../technical/event/event.html#romaine" class="header">Romaine</a></li>
    <li><a href="../../technical/event/event.html#event-publishing" class="header">Event Publishing</a></li>
    <li><a href="../../technical/event/event.html#event-subscription" class="header">Event Subscription</a></li>
    <li><a href="../../technical/event/event.html#architecture" class="header">Architecture</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 2.0.1
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../technical/event/event.html#event-service" class="header">Event Service</a>
  <ul>
    <li><a href="../../technical/event/event.html#introduction" class="header">Introduction</a></li>
    <li><a href="../../technical/event/event.html#technology-choices" class="header">Technology Choices</a></li>
    <li><a href="../../technical/event/event.html#implementation-details" class="header">Implementation Details</a></li>
    <li><a href="../../technical/event/event.html#romaine" class="header">Romaine</a></li>
    <li><a href="../../technical/event/event.html#event-publishing" class="header">Event Publishing</a></li>
    <li><a href="../../technical/event/event.html#event-subscription" class="header">Event Subscription</a></li>
    <li><a href="../../technical/event/event.html#architecture" class="header">Architecture</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#event-service" name="event-service" class="anchor"><span class="anchor-link"></span></a>Event Service</h1>
<h2><a href="#introduction" name="introduction" class="anchor"><span class="anchor-link"></span></a>Introduction</h2>
<p>Event Service is a <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern">PubSub</a> service which allows publishing of and subscription to CSW <a href="../../params/events.html">Events</a> based on an Event Key, which is a combination of a component&rsquo;s Prefix and Event Name. Event Service is optimized for the high performance requirements of events as demands with varying rates, for ex. 100 Hz, 50 Hz etc., but can also be used with events that are published infrequently or when values change. The end-to-end latency of events assured by Event Service is 5 milliseconds in typical observatory conditions. It also ensures ordered delivery of events with no event loss within performance specification. </p>
<p>In the TMT control system, events are used in a variety of circumstances. Events may be created as the output of a calculation by one component for the input to a calculation in one or more other components. These demand events are usually published at a specific rate and are usually calculated for a specific use or device. Other events indicate the occurence of a specific event in the control system that is of interest to other systems. For instance, the opening/closing of a shutter in a detector system is marked with an event.</p>
<h2><a href="#technology-choices" name="technology-choices" class="anchor"><span class="anchor-link"></span></a>Technology Choices</h2>
<p>There were two good candidates for the backend of Event Service - <a href="https://kafka.apache.org/">Apache Kafka</a> and <a href="https://redis.io/">Redis</a>. The Event Service API is implemented with both these backends and performance testing was done to select one particular backend which would best satisfy the service latency requirements. Results of the performance tests can be found <a href="https://id.atlassian.com/login?continue=https%3A%2F%2Ftmt-project.atlassian.net%2Flogin%3FredirectCount%3D1%26dest-url%3D%252Fwiki%252Fspaces%252FDEOPSCSW%252Fpages%252F191791210%252FEvent%252BService%252BRaw%252BPerformance%252BResults%252BResults%252BMay%252BChange%26application%3Dconfluence&application=confluence">here</a>. Redis was the best choice for the backend as it turned out to be better at providing low latency unlike Kafka which is more suited for high throughput systems. Hence you can see 2 implementations of the API in the Event Service client. The code is structured in a way that it is easy to switch the implementations. The Kafka implementation is being retained for possible future use.</p>
<h2><a href="#implementation-details" name="implementation-details" class="anchor"><span class="anchor-link"></span></a>Implementation Details</h2>
<p><a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/client/EventServiceFactory.html" title="csw.event.client.EventServiceFactory"><code>EventServiceFactory</code></a> in <code>csw-event-client</code> is the entry point in the Event Service. It provides low-level APIs to make a new <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/scaladsl/EventService.html" title="csw.event.api.scaladsl.EventService"><code>EventService</code></a> from Scala and <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/javadsl/IEventService.html" title="csw.event.api.javadsl.IEventService"><code>IEventService</code></a> from Java. It takes an <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/client/models/EventStore.html" title="csw.event.client.models.EventStore"><code>EventStore</code></a> which could be either <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/client/models/EventStores$$RedisStore.html" title="csw.event.client.models.EventStores.RedisStore"><code>RedisStore</code></a> or <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/client/models/EventStores$$KafkaStore$.html" title="csw.event.client.models.EventStores$$KafkaStore"><code>KafkaStore</code></a>.</p>
<p>These APIs are not needed by component developers. The CSW framework provides the correct service implementation.</p>
<p>Depending on which store is provided to the <code>EventServiceFactory</code>, an implementation of <code>EventService</code> is returned  which could be either <code>KafkaEventService</code> or <code>RedisEventService</code>. The default store is set to <code>RedisStore</code>. Hence the service returned by default  is <code>RedisEventService</code>.</p>
<p>Below is a sequence diagram showing the important entities involved in the implementation of Event Service. It captures the flow of the code from creation of <code>EventService</code> via <code>EventServiceFactory</code> through the publishing/subscription of events to the underlying Redis implementation product.</p>
<p><img src="sequence-diagram.png" alt="Sequence Diagram" /> </p>
<p><code>EventServiceFactory</code> provides overloads of the <code>make</code> method that allow creation of <code>EventService</code> using host-port as well as using <code>LocationService</code> to resolve the implementation product. The <code>EventService</code> provides APIs to create an <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/scaladsl/EventPublisher.html" title="csw.event.api.scaladsl.EventPublisher"><code>EventPublisher</code></a> and an <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/scaladsl/EventSubscriber.html" title="csw.event.api.scaladsl.EventSubscriber"><code>EventSubscriber</code></a>, which allow users to publish and subscribe to events. It provides both APIs:</p>
<ul>
  <li>
  <p>to make new instances of publisher/subscriber</p></li>
  <li>
  <p>to use a default instance of publisher/subscriber</p></li>
</ul>
<p>When to use which API is documented in <a href="../../services/event.html#accessing-event-service">this section</a> of the Event Service programming documentation.</p>
<p>Event Service uses <a href="https://redis.io/topics/pubsub">Redis&rsquo; PubSub</a> for publishing and subscribing to events. And to support the feature of <code>getting</code> the latest event on a subscription, the <a href="https://redis.io/commands/set">set operation</a> of Redis DB is used.</p>
<h2><a href="#romaine" name="romaine" class="anchor"><span class="anchor-link"></span></a>Romaine</h2>
<p>At a lower level, we have created a library called &ldquo;Romaine&rdquo; to communicate more efficiently with Redis as is shown in the following figure.</p>
<p><img src="event-layers.png" alt="Event Dependencies" /></p>
<p>Romaine is a Scala library built over the Java Redis client library called <a href="https://lettuce.io/">Lettuce</a>. Romaine provides additional rich APIs over the existing functionality offered by Lettuce including these additional APIs useful to CSW:</p>
<ul>
  <li>
  <p><strong>Async API:</strong> Provides asynchronous API (<code>romaine.async.RedisAsyncApi</code>) for various redis commands like <code>get</code>, <code>set</code>, <code>publish</code> etc.</p></li>
  <li>
  <p><strong>Reactive API:</strong> Provides API for Subscription and Pattern-Subscription (<code>romaine.reactive.RedisSubscriptionApi</code>). On subscription, it returns an <a href="https://doc.akka.io/docs/akka/current/stream/index.html">Akka Stream</a> of Events which on execution materializes to <code>RedisSubscription</code> instance which gives handle to unsubscribe to events.</p></li>
  <li>
  <p><strong>Keyspace API:</strong> Provides APIs to watch <a href="https://redis.io/topics/notifications">Keyspace Notifications</a> (<code>romaine.keyspace.RedisKeySpaceApi</code>). This is a rich API built on Akka Streams which provides not just the change events that happen on keys (for eg: Update, Removal etc.) but also the old and new values corresponding to those keys. </p></li>
</ul>
<p>Event Service uses <code>Async API</code> for publishing and setting the latest event, and <code>Reactive API</code> for subscribing to events and patterns. <code>Keyspace API</code> is used in Alarm Service.</p>
<h2><a href="#event-publishing" name="event-publishing" class="anchor"><span class="anchor-link"></span></a>Event Publishing</h2>
<p>Publishing of events in the Event Service client involves two things in Redis:</p>
<ul>
  <li>
  <p>Publish the event in Redis resulting in distribution of the event to all subscribers</p></li>
  <li>
  <p>Setting the value of event against the event key in Redis. This provides persistence of the most recent event and allows a client to <code>get</code> the most recently published event. This also supports the need to provide a client with the most recently published event whenever a new subscription happens.</p></li>
</ul>
<p>In case the Event Service is not available (i.e., Redis is not available or crashes), the Publish APIs will fail with an exception <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/exceptions/EventServerNotAvailable.html" title="csw.event.api.exceptions.EventServerNotAvailable"><code>EventServerNotAvailable</code></a>. If due to any other reasons, the publishing of events fail, the publish APIs would throw a <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/exceptions/PublishFailure.html" title="csw.event.api.exceptions.PublishFailure"><code>PublishFailure</code></a></p>
<h2><a href="#event-subscription" name="event-subscription" class="anchor"><span class="anchor-link"></span></a>Event Subscription</h2>
<p>A subscription to one or more event keys returns an <a href="https://doc.akka.io/docs/akka/current/stream/index.html">Akka Stream</a> of events. Subscriptions to concrete event keys as well as to glob-style patterns is supported. With pattern or glob-style subscriptions, the subscriber receives all the events with event-keys that match the provided pattern. In both cases, the subscriber gets a handle to an instance of <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/scaladsl/EventSubscription.html" title="csw.event.api.scaladsl.EventSubscription"><code>EventSubscription</code></a> that can be used to unsubscribe. </p>
<p>The subscription API supports subscribing with different modes to control the rate of events you receive. Two modes are provided - RateAdapterMode and RateLimiter mode. Details of when to use which mode could be found <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/scaladsl/SubscriptionMode.html" title="csw/event/api/scaladsl/SubscriptionMode"><code>here</code></a>.</p>
<p>Subscriber API also provides a <code>get</code> API which could be used to fetch the latest events for the specified event keys.</p>
<p>In case, when the underlying event implementation is not available, the Subscribe APIs would fail with an exception <a href="https://tmtsoftware.github.io/csw/2.0.1/api/scala/csw/event/api/exceptions/EventServerNotAvailable.html" title="csw.event.api.exceptions.EventServerNotAvailable"><code>EventServiceNotAvailable</code></a></p>
<h2><a href="#architecture" name="architecture" class="anchor"><span class="anchor-link"></span></a>Architecture</h2>
<p>In order to allow components to discover Event Service, it is necessary to register it with the Location Service including the underlying product, which here refers to the Redis instance (particularly <a href="https://redis.io/topics/sentinel">Redis Sentinel</a>).</p>
<p>For high availability of Event Service, we use the Redis Sentinel along with master and slave instances of Redis. Master and slave are configured in &ldquo;replication&rdquo; mode.</p>
<p>The Sentinel&rsquo;s responsibility is to promote the slave as master when master goes down. It is important to note that when master goes down, the &ldquo;location&rdquo; of Event Service remains the same because the location of Event Service is the location of Sentinel and not of master or slave. The master and slave Redis instances are dedicated for events, however Sentinel is shared across CSW Redis-based services. As Sentinel caters to more than one master, we need to specify which master to connect to for Event Service. That is configured in <code>reference.conf</code> in <code>csw-event-client</code> project. </p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/csw/tree/master/csw-event/csw-event-client/src/main/resources/reference.conf#L2-L6" target="_blank" title="Go to snippet source"></a><code class="language-conf">csw-event {
  redis {
    masterId = &quot;eventServer&quot;
  }
}</code></pre>
<p>Once the location is registered, components and the event CLI can resolve the Event Service location and start publishing/subscribing. </p>
<p><img src="architecture.png" alt="architecture" /></p>
</div>
<div>
<a href="https://github.com/tmtsoftware/csw/tree/master/docs/src/main/technical/event/event.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
2.0.1
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../technical/logging/logging.html" title="Logging Service" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Logging Service
</span>
</div>
</a>
<a href="../../technical/alarm/alarm.html" title="Alarm Service" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Alarm Service
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../."}})</script>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
