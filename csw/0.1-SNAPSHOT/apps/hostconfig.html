<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/tmt_favicon.ico">
<title>csw-host-config Â· TMT Common Software (CSW)</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="TMT Common Software (CSW)" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Common Software (CSW)
</span>
<span class="md-header-nav__topic">
csw-host-config
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/csw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/csw
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="TMT Common Software (CSW)" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="TMT Common Software (CSW)">
TMT Common Software (CSW)
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/csw"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/csw
</div>
</a>

</div>
<ul>
  <li><a href="../commons/getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../commons/create-component.html" class="page">Creating a Component</a></li>
  <li><a href="../commons/multiple-components.html" class="page">Multiple Components</a></li>
  <li><a href="../commons/using-alarms.html" class="page">Using Alarms</a></li>
  <li><a href="../commons/unit-tests.html" class="page">Adding Unit Tests</a></li>
  <li><a href="../commons/messages.html" class="page">Messages</a>
  <ul>
    <li><a href="../messages/keys-parameters.html" class="page">Keys and Parameters</a></li>
    <li><a href="../messages/units.html" class="page">Units</a></li>
    <li><a href="../messages/subsystem.html" class="page">Subsystem</a></li>
    <li><a href="../messages/commands.html" class="page">Commands</a></li>
    <li><a href="../messages/events.html" class="page">Events</a></li>
    <li><a href="../messages/states.html" class="page">State Variables</a></li>
    <li><a href="../messages/result.html" class="page">Result</a></li>
  </ul></li>
  <li><a href="../commons/framework.html" class="page">Framework for creating components (HCD, Assembly, Container)</a>
  <ul>
    <li><a href="../framework/describing-components.html" class="page">ComponentInfo</a></li>
    <li><a href="../framework/creating-components.html" class="page">Creating an Assembly or Hcd Component</a></li>
    <li><a href="../framework/handling-lifecycle.html" class="page">Component Handlers</a></li>
    <li><a href="../framework/managing-command-state.html" class="page">Managing Command State</a></li>
    <li><a href="../framework/tracking-connections.html" class="page">Tracking Connections</a></li>
    <li><a href="../framework/publishing-state.html" class="page">Publishing State</a></li>
    <li><a href="../framework/handling-exceptions.html" class="page">Handling Exceptions</a></li>
    <li><a href="../framework/deploying-components.html" class="page">Deploying Components</a></li>
  </ul></li>
  <li><a href="../commons/command.html" class="page">Communication using Commands</a></li>
  <li><a href="../commons/services.html" class="page">Services</a>
  <ul>
    <li><a href="../services/location.html" class="page">Location Service</a></li>
    <li><a href="../services/config.html" class="page">Configuration Service</a></li>
    <li><a href="../services/logging.html" class="page">Logging Service</a></li>
    <li><a href="../services/event.html" class="page">Event Service</a></li>
    <li><a href="../services/alarm.html" class="page">Alarm Service</a></li>
    <li><a href="../services/time.html" class="page">Time Service</a></li>
    <li><a href="../services/database.html" class="page">Database Service</a></li>
    <li><a href="../services/aas.html" class="page">Authentication and Authorization Service (AAS)</a></li>
  </ul></li>
  <li><a href="../commons/apps.html" class="page">Applications</a>
  <ul>
    <li><a href="../apps/cswlocationserver.html" class="page">csw-location-server</a></li>
    <li><a href="../apps/cswadminserver.html" class="page">csw-admin-server</a></li>
    <li><a href="../apps/cswlocationagent.html" class="page">csw-location-agent</a></li>
    <li><a href="../apps/cswonfigserverapp.html" class="page">csw-config-server</a></li>
    <li><a href="../apps/cswconfigcli.html" class="page">csw-config-cli</a></li>
    <li><a href="../apps/csweventcli.html" class="page">csw-event-cli</a></li>
    <li><a href="../apps/cswalarmcli.html" class="page">csw-alarm-cli</a></li>
    <li><a href="../apps/hostconfig.html" class="active page">csw-host-config</a></li>
  </ul></li>
  <li><a href="../commons/testing.html" class="page">Testing</a></li>
  <li><a href="../commons/sbt-tasks.html" class="page">sbt Tasks</a></li>
  <li><a href="../commons/manuals.html" class="page">Manuals</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../apps/hostconfig.html#csw-host-config" class="header">csw-host-config</a>
  <ul>
    <li><a href="../apps/hostconfig.html#how-to-create" class="header">How to create</a></li>
    <li><a href="../apps/hostconfig.html#command-line-parameter-options" class="header">Command line parameter options</a></li>
    <li><a href="../apps/hostconfig.html#examples" class="header">Examples</a></li>
    <li><a href="../apps/hostconfig.html#where-does-it-fit-in-overall-deployment-strategy-may-change-" class="header">Where does it fit in overall deployment strategy (may change)</a></li>
    <li><a href="../apps/hostconfig.html#custom-host-configuration" class="header">Custom Host Configuration</a></li>
    <li><a href="../apps/hostconfig.html#help" class="header">Help</a></li>
    <li><a href="../apps/hostconfig.html#version" class="header">Version</a></li>
    <li><a href="../apps/hostconfig.html#systemd-configuration" class="header">Systemd configuration</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../apps/hostconfig.html#csw-host-config" class="header">csw-host-config</a>
  <ul>
    <li><a href="../apps/hostconfig.html#how-to-create" class="header">How to create</a></li>
    <li><a href="../apps/hostconfig.html#command-line-parameter-options" class="header">Command line parameter options</a></li>
    <li><a href="../apps/hostconfig.html#examples" class="header">Examples</a></li>
    <li><a href="../apps/hostconfig.html#where-does-it-fit-in-overall-deployment-strategy-may-change-" class="header">Where does it fit in overall deployment strategy (may change)</a></li>
    <li><a href="../apps/hostconfig.html#custom-host-configuration" class="header">Custom Host Configuration</a></li>
    <li><a href="../apps/hostconfig.html#help" class="header">Help</a></li>
    <li><a href="../apps/hostconfig.html#version" class="header">Version</a></li>
    <li><a href="../apps/hostconfig.html#systemd-configuration" class="header">Systemd configuration</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#csw-host-config" name="csw-host-config" class="anchor"><span class="anchor-link"></span></a>csw-host-config</h1>
<p>This is just a helper to create a host configuration application. A component/subsystem is can create their own host configuration application using this helper, to be more precise every github repository should have one host configuration application. The reason for having one app per repo is, when you run <code>universal:publish</code> task, it will generate zip which will be self contained (will have all the required dependencies) and can be deployed independently on any machine.</p>
<p>This application will start multiple containers on a given host machine and each container will have single/multiple components.</p>
<h2><a href="#how-to-create" name="how-to-create" class="anchor"><span class="anchor-link"></span></a>How to create</h2>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/csw/tree/master/examples/src/main/scala/example/framework/HostConfigApp.scala#L6-L10" target="_blank" title="Go to snippet source"></a><code class="language-scala">object HostConfigApp extends App {

  HostConfig.start(&quot;Host-Config-App&quot;, args)

}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/csw/tree/master/examples/src/main/java/example/framework/JHostConfigApp.java#L6-L12" target="_blank" title="Go to snippet source"></a><code class="language-java">public class JHostConfigApp {

    public static void main(String args[]) {
        JHostConfig.start(&quot;JHost-Config-App&quot;, args);
    }

}</code></pre></dd>
</dl><div class="callout note "><div class="callout-title">Note</div>
<p>It is not necessary to have a name of the application as HostConfigApp/JHostConfigApp, user can choose this name.</p></div>
<h2><a href="#command-line-parameter-options" name="command-line-parameter-options" class="anchor"><span class="anchor-link"></span></a>Command line parameter options</h2>
<ul>
  <li><strong><code>--local</code></strong> is an optional parameter. When supplied, get the host configuration file from local machine located at hostConfigPath, else fetch it from config service</li>
  <li><strong><code>&lt;file&gt;</code></strong> is a mandatory parameter. It specifies Host configuration file path</li>
  <li><strong><code>-s, --container-script &lt;script-path&gt;</code></strong> specifies the path of generated shell script of container command app from task <code>universal:packageBin</code> (sbt-native-packager task)</li>
  <li><strong><code>--help</code></strong> prints the help of the application.</li>
  <li><strong><code>--version</code></strong> prints the version of the application.</li>
</ul>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<h3><a href="#pre-requisites" name="pre-requisites" class="anchor"><span class="anchor-link"></span></a>Pre-requisites</h3>
<ul>
  <li>Run <code>sbt project/universal:packageBin</code> command. Here project contains HostConfigApp and ContainerCmdApp and it depends on required components. Ex. Hcd&rsquo;s, Assembly&rsquo;s etc.</li>
  <li>Navigate to <code>project/target/universal</code> directory</li>
  <li>Unzip file created with projects name</li>
  <li>Navigate to <code>bin</code> directory from unzipped content</li>
</ul>
<p>Sbt task: <code>sbt project/universal:packageBin</code> creates following four scripts in <code>bin</code> directory:</p>
<ul>
  <li><code>trombone-host-config-app</code> : Responsible for starting multiple containers. It takes <code>hostconfig.conf</code> file as an argument which contains list of container specifications.</li>
  <li><code>trombone-container-cmd-app</code> : Responsible for starting single container or component in standalone mode. It takes <code>containerConfig.conf</code> file as an argument which contains single container specifications.</li>
  <li><code>trombone-host-config-app.bat</code> : For windows machine.</li>
  <li><code>trombone-container-cmd-app.bat</code> : For windows machine.</li>
</ul>
<p><strong>Examples:</strong></p>
<ol>
  <li>
  <p>
  <pre><code>./trombone-host-config-app hostconfig.conf -s ./trombone-container-cmd-app
</code></pre>Fetch <code>hostconfig.conf</code> from configuration service which contains multiple container configuration, then invoke trombone-container-cmd-app script per container configuration which spawns container</p></li>
  <li>
  <pre><code>./trombone-host-config-app --local hostconfig.conf -s ./trombone-container-cmd-app
</code></pre>
  <p>Fetch and parse <code>hostconfig.conf</code> from current directory which contains multiple container configuration, then invoke trombone-container-cmd-app script per container configuration which spawns container</p></li>
</ol><div class="callout note "><div class="callout-title">Note</div>
<p>In above examples, we are passing argument: <code>-s ./trombone-container-cmd-app</code> to <code>./trombone-host-config-app</code>. here <code>-s</code> stands for script and following to that is script name, in our case its <code>trombone-container-cmd-app</code>. and if you notice, <code>trombone-container-cmd-app</code> does not take container configuration file. <code>hostconfig.conf</code> passed to <code>trombone-host-config-app</code> contains location of container configuration files. Host config app internally parses <code>hostconfig.conf</code> and passes container configuration file location to <code>trombone-container-cmd-app</code>.</p>
<p>Find more details of ContainerCmd application <a href="../framework/deploying-components.html">here</a>.</p></div>
<h2><a href="#where-does-it-fit-in-overall-deployment-strategy-may-change-" name="where-does-it-fit-in-overall-deployment-strategy-may-change-" class="anchor"><span class="anchor-link"></span></a>Where does it fit in overall deployment strategy (may change)</h2>
<p><img src="../images/hostconfig/tmt-deployment.png" alt="TMT_Deployment_Strategy" /></p>
<h2><a href="#custom-host-configuration" name="custom-host-configuration" class="anchor"><span class="anchor-link"></span></a>Custom Host Configuration</h2>
<dl>
  <dt>hostconfig.conf
  </dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/csw/tree/master/examples/src/main/resources/hostConfig.conf#L2-L18" target="_blank" title="Go to snippet source"></a><code class="language-conf"># This is a host configuration file which contains list of containers to be spawned by host configuration app
containers: [
  {
    # mode can be one of Container or Standalone
    mode: &quot;Container&quot;
    # path of individual container configuration file
    configFilePath: &quot;/Users/salonivithalani/Desktop/tw_tmt/csw/examples/src/main/resources/assemblyContainer.conf&quot;
    # provide &#39;Remote&#39; if file needs to fetched from config service else
    # provide &#39;Local&#39; to fetch file from local machine
    configFileLocation: &quot;Local&quot;
  },
  {
    mode: &quot;Standalone&quot;
    configFilePath: &quot;/Users/salonivithalani/Desktop/tw_tmt/csw/examples/src/main/resources/hcdStandalone.conf&quot;
    configFileLocation: &quot;Local&quot;
  }
]</code></pre></dd>
</dl>
<h2><a href="#help" name="help" class="anchor"><span class="anchor-link"></span></a>Help</h2>
<p>Use the following command to get help on the options available with this app</p>
<p><code>./bin/trombone-host-config-app --help</code></p>
<h2><a href="#version" name="version" class="anchor"><span class="anchor-link"></span></a>Version</h2>
<p>Use the following command to get version information for this app</p>
<p><code>./bin/trombone-host-config-app --version</code></p><div class="callout note "><div class="callout-title">Note</div>
<p>Before running <code>host-config</code> app, make sure that <code>csw-location-server</code> is running on local machine at <code>localhost:7654</code>. As host config application internally executes <code>container-cmd</code> application which uses local HTTP location client which expect location server running locally.</p></div>
<h2><a href="#systemd-configuration" name="systemd-configuration" class="anchor"><span class="anchor-link"></span></a>Systemd configuration</h2>
<p>Using systemd, you can configure host configuration application to spawn containers on a machine to be run automatically on system startup.</p>
<p>For detailed information on systemd configuration, please refer to <a href="https://github.com/tmtsoftware/csw/tree/master/tools/systemd/readme.md">readme.md</a> </p>
</div>
<div>
<a href="https://github.com/tmtsoftware/csw/tree/master/docs/src/main/apps/hostconfig.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../apps/cswalarmcli.html" title="csw-alarm-cli" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
csw-alarm-cli
</span>
</div>
</a>
<a href="../commons/testing.html" title="Testing" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Testing
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
