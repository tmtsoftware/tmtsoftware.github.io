<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.4.0, mkdocs-material=2.2.2">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.language" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/tmt_favicon.ico">
<title>Alarm Service · TMT Common Software (CSW)</title>
<link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="TMT Common Software (CSW)" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
TMT Common Software (CSW)
</span>
<span class="md-header-nav__topic">
Alarm Service
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="search"></label>
<div class="md-search__inner">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
<label class="md-icon md-search__icon" for="search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/tmtsoftware/csw-prod"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/csw-prod
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</span>
<a href="../index.html" title="TMT Common Software (CSW)">
TMT Common Software (CSW)
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/tmtsoftware/csw-prod"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
tmtsoftware/csw-prod
</div>
</a>

</div>
<ul>
  <li><a href="../commons/getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../commons/create-component.html" class="page">Creating a Component</a></li>
  <li><a href="../commons/multiple-components.html" class="page">Multiple Components</a></li>
  <li><a href="../commons/messages.html" class="page">Messages</a>
  <ul>
    <li><a href="../messages/keys-parameters.html" class="page">Keys and Parameters</a></li>
    <li><a href="../messages/units.html" class="page">Units</a></li>
    <li><a href="../messages/subsystem.html" class="page">Subsystem</a></li>
    <li><a href="../messages/commands.html" class="page">Commands</a></li>
    <li><a href="../messages/events.html" class="page">Events</a></li>
    <li><a href="../messages/states.html" class="page">State Variables</a></li>
    <li><a href="../messages/result.html" class="page">Result</a></li>
  </ul></li>
  <li><a href="../commons/framework.html" class="page">Framework for creating components (HCD, Assembly, Container)</a>
  <ul>
    <li><a href="../framework/describing-components.html" class="page">ComponentInfo</a></li>
    <li><a href="../framework/creating-components.html" class="page">Creating an Assembly or Hcd Component</a></li>
    <li><a href="../framework/handling-lifecycle.html" class="page">Component Handlers</a></li>
    <li><a href="../framework/managing-command-state.html" class="page">Managing Command State</a></li>
    <li><a href="../framework/tracking-connections.html" class="page">Tracking Connections</a></li>
    <li><a href="../framework/publishing-state.html" class="page">Publishing State</a></li>
    <li><a href="../framework/handling-exceptions.html" class="page">Handling Exceptions</a></li>
    <li><a href="../framework/deploying-components.html" class="page">Deploying Components</a></li>
  </ul></li>
  <li><a href="../commons/command.html" class="page">Communication using Commands</a></li>
  <li><a href="../commons/services.html" class="page">Services</a>
  <ul>
    <li><a href="../services/location.html" class="page">Location Service</a></li>
    <li><a href="../services/config.html" class="page">Configuration Service</a></li>
    <li><a href="../services/logging.html" class="page">Logging Service</a></li>
    <li><a href="../services/event.html" class="page">Event Service</a></li>
    <li><a href="../services/alarm.html" class="active page">Alarm Service</a></li>
  </ul></li>
  <li><a href="../commons/apps.html" class="page">Applications</a>
  <ul>
    <li><a href="../apps/cswclusterseed.html" class="page">csw-cluster-seed</a></li>
    <li><a href="../apps/cswlocationagent.html" class="page">csw-location-agent</a></li>
    <li><a href="../apps/cswonfigserverapp.html" class="page">csw-config-server</a></li>
    <li><a href="../apps/cswconfigcli.html" class="page">csw-config-cli</a></li>
    <li><a href="../apps/csweventcli.html" class="page">csw-event-cli</a></li>
    <li><a href="../apps/cswalarmcli.html" class="page">csw-alarm-cli</a></li>
    <li><a href="../apps/hostconfig.html" class="page">csw-host-config</a></li>
  </ul></li>
  <li><a href="../commons/testing.html" class="page">Testing</a></li>
  <li><a href="../commons/sbt-tasks.html" class="page">sbt Tasks</a></li>
  <li><a href="../commons/manuals.html" class="page">Manuals</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../services/alarm.html#alarm-service" class="header">Alarm Service</a>
  <ul>
    <li><a href="../services/alarm.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="../services/alarm.html#rules-and-checkes" class="header">Rules and checkes</a></li>
    <li><a href="../services/alarm.html#model-classes" class="header">Model Classes</a></li>
    <li><a href="../services/alarm.html#api-flavours" class="header">API Flavours</a></li>
    <li><a href="../services/alarm.html#creating-clientapi-and-adminapi" class="header">Creating clientAPI and adminAPI</a></li>
    <li><a href="../services/alarm.html#setseverity" class="header">setSeverity</a></li>
    <li><a href="../services/alarm.html#init-alarms" class="header">init alarms</a></li>
    <li><a href="../services/alarm.html#acknowledge" class="header">acknowledge</a></li>
    <li><a href="../services/alarm.html#shelve" class="header">shelve</a></li>
    <li><a href="../services/alarm.html#unshelve" class="header">unshelve</a></li>
    <li><a href="../services/alarm.html#reset" class="header">reset</a></li>
    <li><a href="../services/alarm.html#getmetadata" class="header">getMetadata</a></li>
    <li><a href="../services/alarm.html#getstatus" class="header">getStatus</a></li>
    <li><a href="../services/alarm.html#getcurrentseverity" class="header">getCurrentSeverity</a></li>
    <li><a href="../services/alarm.html#getaggregatedseverity" class="header">getAggregatedSeverity</a></li>
    <li><a href="../services/alarm.html#getaggregatedhealth" class="header">getAggregatedHealth</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedseveritycallback" class="header">subscribeAggregatedSeverityCallback</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedseverityactorref" class="header">subscribeAggregatedSeverityActorRef</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedhealthcallback" class="header">subscribeAggregatedHealthCallback</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedhealthactorref" class="header">subscribeAggregatedHealthActorRef</a></li>
  </ul></li>
</ul>
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 0.1*
</div>
</nav>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../services/alarm.html#alarm-service" class="header">Alarm Service</a>
  <ul>
    <li><a href="../services/alarm.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="../services/alarm.html#rules-and-checkes" class="header">Rules and checkes</a></li>
    <li><a href="../services/alarm.html#model-classes" class="header">Model Classes</a></li>
    <li><a href="../services/alarm.html#api-flavours" class="header">API Flavours</a></li>
    <li><a href="../services/alarm.html#creating-clientapi-and-adminapi" class="header">Creating clientAPI and adminAPI</a></li>
    <li><a href="../services/alarm.html#setseverity" class="header">setSeverity</a></li>
    <li><a href="../services/alarm.html#init-alarms" class="header">init alarms</a></li>
    <li><a href="../services/alarm.html#acknowledge" class="header">acknowledge</a></li>
    <li><a href="../services/alarm.html#shelve" class="header">shelve</a></li>
    <li><a href="../services/alarm.html#unshelve" class="header">unshelve</a></li>
    <li><a href="../services/alarm.html#reset" class="header">reset</a></li>
    <li><a href="../services/alarm.html#getmetadata" class="header">getMetadata</a></li>
    <li><a href="../services/alarm.html#getstatus" class="header">getStatus</a></li>
    <li><a href="../services/alarm.html#getcurrentseverity" class="header">getCurrentSeverity</a></li>
    <li><a href="../services/alarm.html#getaggregatedseverity" class="header">getAggregatedSeverity</a></li>
    <li><a href="../services/alarm.html#getaggregatedhealth" class="header">getAggregatedHealth</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedseveritycallback" class="header">subscribeAggregatedSeverityCallback</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedseverityactorref" class="header">subscribeAggregatedSeverityActorRef</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedhealthcallback" class="header">subscribeAggregatedHealthCallback</a></li>
    <li><a href="../services/alarm.html#subscribeaggregatedhealthactorref" class="header">subscribeAggregatedHealthActorRef</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#alarm-service" name="alarm-service" class="anchor"><span class="anchor-link"></span></a>Alarm Service</h1>
<p>The Alarm Service provides api to manage alarms present in the TMT software system.</p>
<!-- introduction to the service -->
<h2><a href="#dependencies" name="dependencies" class="anchor"><span class="anchor-link"></span></a>Dependencies</h2>
<p>To use the Alarm service without using the framework, add this to your <code>build.sbt</code> file:</p>
<dl>
  <dt>sbt</dt>
  <dd>
  <p>@@@vars</p>
  <pre class="prettyprint"><code class="language-scala">libraryDependencies += &quot;org.tmt&quot; %% &quot;csw-alarm-client&quot; % &quot;$version$&quot;
</code></pre></dd>
</dl>
<h2><a href="#rules-and-checkes" name="rules-and-checkes" class="anchor"><span class="anchor-link"></span></a>Rules and checkes</h2>
<ul>
  <li>When representing a unique alarm, the alarm name or component name must not have <code>* [ ] ^ -</code> or <code>any whitespace characters</code></li>
</ul>
<h2><a href="#model-classes" name="model-classes" class="anchor"><span class="anchor-link"></span></a>Model Classes</h2>
<ul>
  <li><strong>AlarmKey</strong> : Represents the unique alarm in the TMT system. It is composed of subsystem, component and alarm name.</li>
  <li><strong>ComponentKey</strong> : Represents all alarms of a component</li>
  <li><strong>SubsystemKey</strong> : Represents all alarms of a subsystem</li>
  <li><strong>GlobalKey</strong> : Represents all alarms present in the TMT system</li>
  <li><strong>AlarmMetadata</strong> : Represents static metadata of an alarm, which will not change in its entire lifespan.</li>
  <li><strong>AlarmStatus</strong> : Represents dynamically changing data of the an alarm, which will be changing depending on the severity change or manually changed by an operator</li>
  <li><strong>AlarmSeverity</strong> : Represents severity levels that can be set by the component developer e.g. Okay, Indeterminate, Warning, Major and Critical</li>
  <li><strong>FullAlarmSeverity</strong> : Represents all possible severity levels of the alarm i.e. Disconnected (cannot be set by the developer) plus other severity levels that can be set by the developer</li>
  <li><strong>AlarmHealth</strong> : Represents possible health of an alarm or component or subsystem or whole TMT system</li>
</ul>
<h2><a href="#api-flavours" name="api-flavours" class="anchor"><span class="anchor-link"></span></a>API Flavours</h2>
<p>The Alarm Service is used to manage alarms and it&rsquo;s properties. Component developers will get the handle of <code>CswContext</code> which has <code>alarmService</code> ready to be used for setting severity.</p><div class="callout note "><div class="callout-title">Note</div>
<p>The <code>alarmService</code> privided in <code>CswContext</code> is a clientApi (explained in detail below) which only has <code>setSeverity</code> api.</p></div>
<!-- give cli reference in here -->
<p>To use the alarm service for administrative purposes admin api must be used. The creation of the admin api is demonstrated below. The admin api provides the ability to load alarm data into alarm store, set severity of an alarm, acknowledge alarms, shelve or unshelve alarms, reset an alarm, getting the metadata/status/severity of an alarm and getting or subscribing to aggregations of severity and health of the alarm/component/subsystem/whole TMT System.</p>
<ul>
  <li><strong>clientAPI (AlarmService)</strong> : Must be used by component. Available method is : <code>{setSeverity}</code></li>
  <li><strong>adminAPI (AlarmAdminService)</strong> : Expected to be used by administrative. Available methods are: <code>{initAlarm | setSeverity | acknowledge | shelve | unshelve | reset | getMetaData
| getStatus | getCurrentSeverity | getAggregatedSeverity | getAggregatedHealth | subscribeAggregatedSeverityCallback
| subscribeAggregatedSeverityActorRef | subscribeAggregatedHealthCallback | subscribeAggregatedHealthActorRef }</code></li>
</ul>
<h2><a href="#creating-clientapi-and-adminapi" name="creating-clientapi-and-adminapi" class="anchor"><span class="anchor-link"></span></a>Creating clientAPI and adminAPI</h2>
<p>If you are not using csw-framework, you can create <a href="https://tmtsoftware.github.io/csw-prod/0.1-SNAPSHOT/api/scala/csw/alarm/api/scaladsl/AlarmService.html">AlarmService</a> using <a href="https://tmtsoftware.github.io/csw-prod/0.1-SNAPSHOT/api/scala/csw/alarm/client/AlarmServiceFactory.html">AlarmServiceFactory</a>.</p><div class="callout note "><div class="callout-title">Note</div>
<p>The Admin API will be used from an administrative user interface or an alarm cli. More details about alarm cli can be found here.  The <a href="../apps/cswalarmcli.html">CSW Alarm Client CLI application</a> is provided with this functionality.</p></div>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">// create alarm client using host and port of alarm server
private val clientAPI1 = new AlarmServiceFactory().makeClientApi(&quot;localhost&quot;, 5225)

// create alarm client using location service
private val clientAPI2 = new AlarmServiceFactory().makeClientApi(locationService)

// create alarm admin using host and port of alarm server
private val adminAPI1 = new AlarmServiceFactory().makeAdminApi(&quot;localhost&quot;, 5226)

// create alarm admin using location service
private val adminAPI2 = new AlarmServiceFactory().makeAdminApi(locationService)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">// create alarm client using host and port of alarm server
private val jclientAPI1 = new AlarmServiceFactory().jMakeClientApi(&quot;localhost&quot;, 5227, actorSystem)

// create alarm client using location service
private val jclientAPI2 = new AlarmServiceFactory().jMakeClientApi(jlocationService, actorSystem)</code></pre></dd>
</dl>
<h2><a href="#setseverity" name="setseverity" class="anchor"><span class="anchor-link"></span></a>setSeverity</h2>
<p>Sets the severity of the given alarm. It is important that component devs keep refreshing the severity by setting it at a regular interval for all it&rsquo;s alarms, so that it does not get marked as <code>Disconnected</code> after a specific time. </p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  await(clientAPI.setSeverity(alarmKey, Okay))
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">private val done: Done = jclientAPI.setSeverity(alarmKey, Okay).get()</code></pre></dd>
</dl><div class="callout note "><div class="callout-title">Note</div>
<ul>
  <li>If the alarm is not refreshed within 9 seconds, it will be inferred as <code>Disconnected</code></li>
  <li>If the alarm is auto-acknowledgable and the severity is set to <code>Okay</code> then, the alarm will be auto-acknowledged and  will not require any explicit admin action in terms of acknowledging</li>
</ul></div>
<h2><a href="#init-alarms" name="init-alarms" class="anchor"><span class="anchor-link"></span></a>init alarms</h2>
<p>Loads the given alarm data in alarm store</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  val resource             = &quot;test-alarms/valid-alarms.conf&quot;
  val alarmsConfig: Config = ConfigFactory.parseResources(resource)
  await(adminAPI.initAlarms(alarmsConfig))
}</code></pre></dd>
</dl>
<h2><a href="#acknowledge" name="acknowledge" class="anchor"><span class="anchor-link"></span></a>acknowledge</h2>
<p>Acknowledges the given alarm which is raised to a certain severity</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  await(adminAPI.acknowledge(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#shelve" name="shelve" class="anchor"><span class="anchor-link"></span></a>shelve</h2>
<p>Shelves the given alarm. Alarms will be un-shelved automatically at a specific time(i.e. 8 AM local time by default) if it is not un-shelved manually before that. The time to automatically un-shelve can be configured in application.conf for e.g csw-alarm.shelve-timeout = h:m:s a .</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  await(adminAPI.shelve(alarmKey))
}</code></pre></dd>
</dl><div class="callout note "><div class="callout-title">Note</div>
<p>Shelved alarms are also considered in aggregation calculation of alarms.</p></div>
<h2><a href="#unshelve" name="unshelve" class="anchor"><span class="anchor-link"></span></a>unshelve</h2>
<p>Unshelves the given alarm</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  await(adminAPI.unshelve(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#reset" name="reset" class="anchor"><span class="anchor-link"></span></a>reset</h2>
<p>Resets the status of the given alarm by updating the latched severity same as current severity and acknowledgement status to acknowledged without changing any other properties of the alarm.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  await(adminAPI.reset(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#getmetadata" name="getmetadata" class="anchor"><span class="anchor-link"></span></a>getMetadata</h2>
<p>Gets the metadata(s) of an alarm/component/subsystem/whole TMT system, which contains fields like:</p>
<ul>
  <li>subsystem</li>
  <li>component</li>
  <li>name</li>
  <li>description</li>
  <li>location</li>
  <li>alarmType</li>
  <li>supported severities</li>
  <li>probable cause</li>
  <li>operator response</li>
  <li>is autoAcknowledgeable</li>
  <li>is latchable</li>
  <li>activation status</li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  val metadata: AlarmMetadata = await(adminAPI.getMetadata(alarmKey))
}</code></pre></dd>
</dl><div class="callout note "><div class="callout-title">Note</div>
<p>Inactive alarms will not be taking part in aggregation of severity or health. </p></div>
<h2><a href="#getstatus" name="getstatus" class="anchor"><span class="anchor-link"></span></a>getStatus</h2>
<p>Gets the status of the alarm which contains fields like:</p>
<ul>
  <li>latched severity</li>
  <li>acknowledgement status</li>
  <li>shelve status</li>
  <li>alarm time</li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  val status: AlarmStatus = await(adminAPI.getStatus(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#getcurrentseverity" name="getcurrentseverity" class="anchor"><span class="anchor-link"></span></a>getCurrentSeverity</h2>
<p>Gets the severity of the alarm.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  val severity: FullAlarmSeverity = await(adminAPI.getCurrentSeverity(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#getaggregatedseverity" name="getaggregatedseverity" class="anchor"><span class="anchor-link"></span></a>getAggregatedSeverity</h2>
<p>Gets the aggregated severity for the given alarm/component/subsystem/whole TMT system. Aggregation of the severity is represents the most severe alarm amongst multiple alarms.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  val aggregatedSeverity: FullAlarmSeverity = await(adminAPI.getAggregatedSeverity(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#getaggregatedhealth" name="getaggregatedhealth" class="anchor"><span class="anchor-link"></span></a>getAggregatedHealth</h2>
<p>Gets the aggregated health for the given alarm/component/subsystem/whole TMT system. Aggregation of health is either <code>Good</code>, <code>ill</code> or <code>Bad</code> based on the most severe alarm amongst multiple alarms.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">async {
  val health: AlarmHealth = await(adminAPI.getAggregatedHealth(alarmKey))
}</code></pre></dd>
</dl>
<h2><a href="#subscribeaggregatedseveritycallback" name="subscribeaggregatedseveritycallback" class="anchor"><span class="anchor-link"></span></a>subscribeAggregatedSeverityCallback</h2>
<p>Subscribes to the changes of aggregated severity for given alarm/component/subsystem/whole TMT system by providing a callback which gets executed for every change.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">adminAPI.subscribeAggregatedSeverityCallback(
  alarmKey,
  aggregatedSeverity ⇒ { /* do something*/ }
)</code></pre></dd>
</dl>
<h2><a href="#subscribeaggregatedseverityactorref" name="subscribeaggregatedseverityactorref" class="anchor"><span class="anchor-link"></span></a>subscribeAggregatedSeverityActorRef</h2>
<p>Subscribes to the changes of aggregated severity for given alarm/component/subsystem/whole TMT system by providing an actor which will receive a message of aggregated severity on every change.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">adminAPI.subscribeAggregatedSeverityActorRef(alarmKey, severityActorRef)</code></pre></dd>
</dl>
<h2><a href="#subscribeaggregatedhealthcallback" name="subscribeaggregatedhealthcallback" class="anchor"><span class="anchor-link"></span></a>subscribeAggregatedHealthCallback</h2>
<p>Subscribe to the changes of aggregated health for given alarm/component/subsystem/whole TMT system by providing a callback which gets executedfor every change.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">adminAPI.subscribeAggregatedHealthCallback(
  alarmKey,
  aggregatedHealth ⇒ { /* do something*/ }
)</code></pre></dd>
</dl>
<h2><a href="#subscribeaggregatedhealthactorref" name="subscribeaggregatedhealthactorref" class="anchor"><span class="anchor-link"></span></a>subscribeAggregatedHealthActorRef</h2>
<p>Subscribes to the changes of aggregated health for given alarm/component/subsystem/whole TMT system by providing an actor which will receive a message of aggregated severity on every change.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">adminAPI.subscribeAggregatedHealthActorRef(alarmKey, healthActorRef)</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/tmtsoftware/csw-prod/tree/master/docs/src/main/services/alarm.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../services/event.html" title="Event Service" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Event Service
</span>
</div>
</a>
<a href="../commons/apps.html" title="Applications" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Applications
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.5165553b.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
