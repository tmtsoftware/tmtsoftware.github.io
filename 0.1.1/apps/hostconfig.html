<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme, mkdocs-material=1.11.0">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.languages" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>csw-host-config Â· TMT Common Software (CSW)</title>
<script src="../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="../assets/stylesheets/application-0741cbeb94.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
data-md-color-primary="indigo"
data-md-color-accent="indigo">
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="TMT Common Software (CSW)" class="md-header-nav__button md-logo">
<i class="md-icon md-icon--home"></i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<span class="md-flex__ellipsis md-header-nav__title">
csw-host-config
</span>
</div>
<form name="search" style="display: none">
<input type="text" name="query">
</form>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<div class="md-nav__button md-logo">
<i class="md-icon md-icon--home"></i>
</div>
<a href="../index.html" title="TMT Common Software (CSW)">
TMT Common Software (CSW)
</a>
</label>
<ul>
  <li><a href="../manuals.html" class="page">Manuals</a></li>
  <li><a href="../apps.html" class="page">Applications</a>
  <ul>
    <li><a href="../apps/cswclusterseed.html" class="page">csw-cluster-seed</a></li>
    <li><a href="../apps/cswlocationagent.html" class="page">csw-location-agent</a></li>
    <li><a href="../apps/cswonfigserverapp.html" class="page">csw-config-server</a></li>
    <li><a href="../apps/cswconfigclientcli.html" class="page">csw-config-client-cli</a></li>
    <li><a href="../apps/hostconfig.html" class="active page">csw-host-config</a></li>
  </ul></li>
  <li><a href="../services.html" class="page">Services</a>
  <ul>
    <li><a href="../services/location.html" class="page">Location service</a></li>
    <li><a href="../services/config.html" class="page">Configuration service</a></li>
    <li><a href="../services/logging.html" class="page">Logging service</a></li>
    <li><a href="../services/messages.html" class="page">csw-messages</a></li>
  </ul></li>
  <li><a href="../framework.html" class="page">Framework for creating components (HCD, Assembly, Container)</a>
  <ul>
    <li><a href="../framework/describing-components.html" class="page">ComponentInfo</a></li>
    <li><a href="../framework/creating-components.html" class="page">Creating an Assembly or Hcd Component</a></li>
    <li><a href="../framework/handling-lifecycle.html" class="page">Lifecycle support</a></li>
    <li><a href="../framework/tracking-connections.html" class="page">Tracking Connections</a></li>
    <li><a href="../framework/publishing-state.html" class="page">Publishing State</a></li>
    <li><a href="../framework/handling-exceptions.html" class="page">Handling Exceptions</a></li>
    <li><a href="../framework/deploying-components.html" class="page">Deploying Components</a></li>
  </ul></li>
  <li><a href="../command.html" class="page">Communication using Commands</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../apps/hostconfig.html#csw-host-config" class="header">csw-host-config</a>
  <ul>
    <li><a href="../apps/hostconfig.html#how-to-create" class="header">How to create</a></li>
    <li><a href="../apps/hostconfig.html#command-line-parameter-options" class="header">Command line parameter options</a></li>
    <li><a href="../apps/hostconfig.html#examples" class="header">Examples</a></li>
    <li><a href="../apps/hostconfig.html#where-does-it-fit-in-overall-deployment-strategy-may-change-" class="header">Where does it fit in overall deployment strategy (may change)</a></li>
    <li><a href="../apps/hostconfig.html#custom-host-configuration" class="header">Custom Host Configuration</a></li>
    <li><a href="../apps/hostconfig.html#help" class="header">Help</a></li>
    <li><a href="../apps/hostconfig.html#version" class="header">Version</a></li>
    <li><a href="../apps/hostconfig.html#systemd-configuration" class="header">Systemd configuration</a></li>
  </ul></li>
</ul>
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 0.1.1
</div>
</nav>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../apps/hostconfig.html#csw-host-config" class="header">csw-host-config</a>
  <ul>
    <li><a href="../apps/hostconfig.html#how-to-create" class="header">How to create</a></li>
    <li><a href="../apps/hostconfig.html#command-line-parameter-options" class="header">Command line parameter options</a></li>
    <li><a href="../apps/hostconfig.html#examples" class="header">Examples</a></li>
    <li><a href="../apps/hostconfig.html#where-does-it-fit-in-overall-deployment-strategy-may-change-" class="header">Where does it fit in overall deployment strategy (may change)</a></li>
    <li><a href="../apps/hostconfig.html#custom-host-configuration" class="header">Custom Host Configuration</a></li>
    <li><a href="../apps/hostconfig.html#help" class="header">Help</a></li>
    <li><a href="../apps/hostconfig.html#version" class="header">Version</a></li>
    <li><a href="../apps/hostconfig.html#systemd-configuration" class="header">Systemd configuration</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#csw-host-config" name="csw-host-config" class="anchor"><span class="anchor-link"></span></a>csw-host-config</h1>
<p>This is just a helper to create host configuration application. Every component/subsystem is expected to create their own host configuration application using this helper, to be more precise every github repository should have one host configuration application. Reason for having one app per repo is, when you run <code>universal:publish</code> task, it will generate zip which will be self contained (will have all the required dependencies) and can be deployed independently on any machine.</p>
<p>This application will start multiple containers on a given host machine and each container will have single/multiple components.</p>
<h2><a href="#how-to-create" name="how-to-create" class="anchor"><span class="anchor-link"></span></a>How to create</h2>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">import csw.apps.hostconfig.HostConfig

object TromboneHostConfigApp extends App {
  HostConfig.start(&quot;Trombone-Host-Config-App&quot;, args)
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">import csw.framework.javadsl.JHostConfig;

public class JTromboneHostConfigApp {

    public static void main(String args[]) {
        JHostConfig.start(&quot;JTrombone-Host-Config-App&quot;, args);
    }
}</code></pre></dd>
</dl>
<h2><a href="#command-line-parameter-options" name="command-line-parameter-options" class="anchor"><span class="anchor-link"></span></a>Command line parameter options</h2>
<ul>
  <li><strong><code>--local</code></strong> It&rsquo;s an optional parameter. When supplied, get the host configuration file from local machine located at hostConfigPath, else fetch it from config service</li>
  <li><strong><code>&lt;file&gt;</code></strong> It&rsquo;s mandatory parameter. It specifies Host configuration file path</li>
  <li><strong><code>-s, --container-script &lt;script-path&gt;</code></strong> It specifies the path of generated shell script of container command app from task <code>universal:publish</code> (sbt-native-packager task)</li>
  <li><strong><code>--help</code></strong> Prints the help of the application.</li>
  <li><strong><code>--version</code></strong> Prints the version of the application.</li>
</ul>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<p><strong>Example:</strong> <code>./trombone-host-config-app hostConfig.conf -s ./trombone-container-cmd-app</code><br/><strong>Explanation:</strong> Fetch hostconfig.conf from configuration service which contains multiple container configuration, then invoke trombone-container-cmd-app script per container configuration which spawns container</p>
<p><strong>Example:</strong> <code>./trombone-host-config-app --local hostConfig.conf -s ./trombone-container-cmd-app</code><br/><strong>Explanation:</strong> Fetch and parse hostconfig.conf from current directory which contains multiple container configuration, then invoke trombone-container-cmd-app script per container configuration which spawns container</p>
<h2><a href="#where-does-it-fit-in-overall-deployment-strategy-may-change-" name="where-does-it-fit-in-overall-deployment-strategy-may-change-" class="anchor"><span class="anchor-link"></span></a>Where does it fit in overall deployment strategy (may change)</h2>
<p><img src="../images/hostconfig/tmt-deployment.png" alt="TMT_Deployment_Strategy" /></p>
<h2><a href="#custom-host-configuration" name="custom-host-configuration" class="anchor"><span class="anchor-link"></span></a>Custom Host Configuration</h2>
<dl>
  <dt>hostconfig.conf
  </dt>
  <dd>
  <pre class="prettyprint"><code class="language-conf"># This is a host configuration file which contains list of containers to be spawned by host configuration app
containers: [
  {
    # mode can be one of Container or Standalone
    mode: &quot;Container&quot;
    # path of individual container configuration file
    configFilePath: &quot;/Users/pritamkadam/TMT/csw-prod/csw-vslice/src/main/resources/assemblyContainer.conf&quot;
    # provide &#39;Remote&#39; if file needs to fetched from config service else
    # provide &#39;Local&#39; to fetch file from local machine
    configFileLocation: &quot;Local&quot;
  },
  {
    mode: &quot;Standalone&quot;
    configFilePath: &quot;/Users/pritamkadam/TMT/csw-prod/csw-vslice/src/main/resources/hcdStandalone.conf&quot;
    configFileLocation: &quot;Local&quot;
  }
]</code></pre></dd>
</dl>
<h2><a href="#help" name="help" class="anchor"><span class="anchor-link"></span></a>Help</h2>
<p>Use the following command to get help on the options available with this app</p>
<p><code>./bin/trombone-host-config-app --help</code></p>
<h2><a href="#version" name="version" class="anchor"><span class="anchor-link"></span></a>Version</h2>
<p>Use the following command to get version information for this app</p>
<p><code>./bin/trombone-host-config-app --version</code></p>
<h2><a href="#systemd-configuration" name="systemd-configuration" class="anchor"><span class="anchor-link"></span></a>Systemd configuration</h2>
<p>Using systemd, you can configure host configuration application to spawn containers on a machine to be run automatically on system startup.</p>
<p>For detailed information on systemd configuration, please refer <a href="https://github.com/tmtsoftware/csw-prod/blob/master/tools/systemd/readme.md">readme.md</a> </p>
</div>
<div>
<a href="https://github.com/tmtsoftware/csw-prod/tree/master/docs/src/main/apps/hostconfig.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.1
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../apps/cswconfigclientcli.html" title="csw-config-client-cli" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
csw-config-client-cli
</span>
</div>
</a>
<a href="../services.html" title="Services" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Services
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox" title="Paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/" title="Paradox Material Theme">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
</div>

</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application-268d62d82d.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({url:{base:".././"}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
