<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>Creating a Web Application · Web Application Tutorial</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Web Application Tutorial" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Web Application Tutorial
</span>
<span class="md-header-nav__topic">
Creating a Web Application
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="Web Application Tutorial" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="Web Application Tutorial">
Web Application Tutorial
</a>
</label>
<ul>
  <li><a href="../flows/base-flow.html" class="active page">Creating a Web Application</a></li>
  <li><a href="../flows/auth-flow.html" class="page">Adding Authentication</a></li>
  <li><a href="../flows/db-flow.html" class="page">Adding Database Persistence</a></li>
  <li><a href="../flows/docs-flow.html" class="page">Adding Paradox Documentation</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../flows/base-flow.html#creating-a-web-application" class="header">Creating a Web Application</a>
  <ul>
    <li><a href="../flows/base-flow.html#overview" class="header">Overview</a></li>
    <li><a href="../flows/base-flow.html#generate-application" class="header">Generate application</a></li>
    <li><a href="../flows/base-flow.html#compile-frontend" class="header">Compile frontend</a></li>
    <li><a href="../flows/base-flow.html#compile-backend" class="header">Compile backend</a></li>
    <li><a href="../flows/base-flow.html#add-routes-to-backend" class="header">Add routes to backend</a></li>
    <li><a href="../flows/base-flow.html#consume-routes-in-frontend" class="header">Consume routes in frontend</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.1.0*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../flows/base-flow.html#creating-a-web-application" class="header">Creating a Web Application</a>
  <ul>
    <li><a href="../flows/base-flow.html#overview" class="header">Overview</a></li>
    <li><a href="../flows/base-flow.html#generate-application" class="header">Generate application</a></li>
    <li><a href="../flows/base-flow.html#compile-frontend" class="header">Compile frontend</a></li>
    <li><a href="../flows/base-flow.html#compile-backend" class="header">Compile backend</a></li>
    <li><a href="../flows/base-flow.html#add-routes-to-backend" class="header">Add routes to backend</a></li>
    <li><a href="../flows/base-flow.html#consume-routes-in-frontend" class="header">Consume routes in frontend</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#creating-a-web-application" name="creating-a-web-application" class="anchor"><span class="anchor-link"></span></a>Creating a Web Application</h1>
<h2><a href="#overview" name="overview" class="anchor"><span class="anchor-link"></span></a>Overview</h2>
<p>This template contains steps to create an example application using the template. It has three sections:</p>
<ul>
  <li>Basic flow - Creating a Web Application</li>
  <li>Adding Authentication</li>
  <li>Adding Persistence</li>
</ul>
<p>Basic flow will show you how to add a routes to backend application and consume them in your frontend. Next two sections are extensions, if you need to add authentication in your application or if you need to save your data to a database.</p>
<p>At any point in time if you want to see code with complete file, you can refer final <a href="https://github.com/tmtsoftware/esw-web-app-example">example app</a> and compare your changes.</p>
<hr/>
<p>Basic flow starts here.</p>
<h2><a href="#generate-application" name="generate-application" class="anchor"><span class="anchor-link"></span></a>Generate application</h2>
<p>First we need to generate a scaffolding application using our gitter8 template</p>
<pre class="prettyprint"><code class="language-bash">g8 tmtsoftware/esw-web-app-template.g8 --name=sample
</code></pre>
<p>It will generate a sample folder with two sub-folders, <code>frontend</code> and <code>backend</code></p>
<h2><a href="#compile-frontend" name="compile-frontend" class="anchor"><span class="anchor-link"></span></a>Compile frontend</h2>
<p>This is where your frontend application is present, it uses Typescript, React and node. Make sure node is installed in your machine. Let&rsquo;s compile our generated application.</p>
<pre class="prettyprint"><code class="language-bash">cd sample/frontend
npm install
npm run build
</code></pre>
<h2><a href="#compile-backend" name="compile-backend" class="anchor"><span class="anchor-link"></span></a>Compile backend</h2>
<p>This is where your backend application is present, it uses Scala ecosystem. Make sure <a href="https://tmtsoftware.github.io/csw/apps/csinstallation.html">coursier</a>, openjdk 11 and latest sbt version is installed in your machine. Let&rsquo;s compile our generated application.</p>
<pre class="prettyprint"><code class="language-bash">cd sample/backend
sbt
sbt:backend&gt; compile
</code></pre>
<h2><a href="#add-routes-to-backend" name="add-routes-to-backend" class="anchor"><span class="anchor-link"></span></a>Add routes to backend</h2>
<p>Open backend folder in you editor(e.g. Intellij) e.g.</p>
<pre class="prettyprint"><code class="language-bash">cd sample/backend
idea .
</code></pre>
<h3><a href="#cleanup-existing-sample" name="cleanup-existing-sample" class="anchor"><span class="anchor-link"></span></a>Cleanup existing sample</h3>
<p>Generated code contains a sample application, we will delete its code and add ours where appropriate.</p>
<ul>
  <li>Delete folder <code>src/main/java</code> ,<code>src/test</code></li>
  <li>Delete Existing files from <code>core/models</code> package in <code>src</code></li>
  <li>Delete existing files from <code>service</code> package in <code>src</code></li>
  <li>Delete existing files from <code>impl</code> package in <code>src</code></li>
  <li>Delete file <code>JSampleImplWrapper.scala</code> from <code>http</code> package in <code>src</code></li>
</ul>
<h3><a href="#add-our-models-classes" name="add-our-models-classes" class="anchor"><span class="anchor-link"></span></a>Add our Models classes</h3>
<p>These model classes will be used to serialized and deserialized request and response.</p>
<ul>
  <li>Go to <code>core/models</code> in <code>src</code></li>
  <li>Add <code>RaDecRequest.scala</code> model class</li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/core/models/RaDecRequest.scala#L4" target="_blank" title="Go to snippet source"></a><code class="language-scala">case class RaDecRequest(raInDecimals: Double, decInDecimals: Double)</code></pre></dd>
</dl>
<p>Add <code>RaDecResponse.scala</code> model class</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/core/models/RaDecResponse.scala#L4" target="_blank" title="Go to snippet source"></a><code class="language-scala">case class RaDecResponse(id: String, formattedRa: String, formattedDec: String)</code></pre></dd>
</dl>
<h3><a href="#add-our-implementation" name="add-our-implementation" class="anchor"><span class="anchor-link"></span></a>Add our implementation</h3>
<ul>
  <li>Go to <code>service</code> in <code>src</code></li>
  <li>Add a scala trait in <code>RaDecService.scala</code> file and add our <code>raDecToString</code> contract, using our request and response model</li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/service/RaDecService.scala#L8-L17" target="_blank" title="Go to snippet source"></a><code class="language-scala">trait RaDecService {
  def raDecToString(raDecRequest: RaDecRequest): Future[RaDecResponse]
}</code></pre></dd>
</dl>
<p>Add <code>getRaDecValues</code> contract in service <code>RaDecService.scala</code></p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/service/RaDecService.scala#L13" target="_blank" title="Go to snippet source"></a><code class="language-scala">def getRaDecValues: Future[List[RaDecResponse]]</code></pre></dd>
</dl>
<ul>
  <li>Go to <code>impl</code> package in <code>src</code></li>
  <li>Add <code>RaDecImpl.scala</code></li>
  <li>Extend <code>RaDecService.scala</code> to implement <code>raDecToString</code></li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/impl/RaDecImpl.scala#L12-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">class RaDecImpl extends RaDecService {

  private val raDecValues = mutable.ListBuffer[RaDecResponse]()

  override def raDecToString(raDecRequest: RaDecRequest): Future[RaDecResponse] = {
    val formattedRa   = Angle.raToString(raDecRequest.raInDecimals)
    val formattedDec  = Angle.deToString(raDecRequest.decInDecimals)
    val raDecResponse = RaDecResponse(UUID.randomUUID().toString, formattedRa, formattedDec)
    raDecValues.append(raDecResponse)
    Future.successful(raDecResponse)
  }
}</code></pre></dd>
</dl>
<p>Implement <code>getRaDecValues</code> contract in <code>RaDecImpl.scala</code></p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/impl/RaDecImpl.scala#L26" target="_blank" title="Go to snippet source"></a><code class="language-scala">override def getRaDecValues: Future[List[RaDecResponse]] = Future.successful(raDecValues.toList)</code></pre></dd>
</dl>
<p>Lets now try to compile our code</p>
<pre class="prettyprint"><code class="language-bash">sbt:backend&gt; compile
</code></pre>
<ul>
  <li>It will give compilation errors hence, delete references to earlier deleted classes from <code>SampleWiring.scala</code></li>
  <li>Add a placeholder for route</li>
</ul>
<pre class="prettyprint"><code class="language-scala">override lazy val routes: Route = ???
</code></pre>
<ul>
  <li>Go to <code>SampleRoute.scala</code></li>
  <li>Delete existing route</li>
  <li>Add a placeholder for route</li>
</ul>
<pre class="prettyprint"><code class="language-scala">val route: Route = ???
</code></pre>
<p>Delete references to earlier deleted classes from scala files <code>SampleRoute</code>, <code>HttpCodecs</code></p>
<p>Try compiling code again, this time it should compile</p>
<pre class="prettyprint"><code class="language-bash">sbt:backend&gt; compile
</code></pre>
<h3><a href="#add-route-for-our-implementation" name="add-route-for-our-implementation" class="anchor"><span class="anchor-link"></span></a>Add Route for our implementation</h3>
<ul>
  <li>Go to <code>SampleWiring.scala</code></li>
  <li>Add <code>raDecImpl</code> reference</li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/impl/SampleWiring.scala#L11" target="_blank" title="Go to snippet source"></a><code class="language-scala">lazy val raDecImpl = new RaDecImpl()</code></pre></dd>
</dl>
<p>Add Route in placeholder</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/impl/SampleWiring.scala#L15-L16" target="_blank" title="Go to snippet source"></a><code class="language-scala">import actorRuntime.ec
override lazy val routes: Route = new SampleRoute(raDecImpl, securityDirectives).route</code></pre></dd>
</dl>
<ul>
  <li>Go to <code>SampleRoute.scala</code></li>
  <li>Add dependency of <code>raDecService</code> to <code>SampleRoute</code></li>
</ul>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/http/SampleRoute.scala#L13-L15" target="_blank" title="Go to snippet source"></a><code class="language-scala">class SampleRoute(raDecService: RaDecService, securityDirectives: SecurityDirectives)(implicit
    ec: ExecutionContext
) extends HttpCodecs {</code></pre></dd>
</dl>
<p>Add route along with an implicit execution context which is provided by ServerWiring.</p>
<p>We are using akka routing dsl to compose our http routes. visit <a href="https://doc.akka.io/docs/akka-http/current/routing-dsl/overview.html">here</a> to learn more about routing dsl.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/http/SampleRoute.scala#L20-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">path(&quot;raDecValues&quot;) {
  post {
    entity(as[RaDecRequest]) { raDecRequest =&gt;
      complete(raDecService.raDecToString(raDecRequest))
    }
  } ~
  get {
    complete(raDecService.getRaDecValues)
  }
} ~</code></pre></dd>
</dl><div class="callout note "><div class="callout-title">Note</div>
<p>The tilda (~) at the end, is used as a path concatenator in akka dsl. You can safely remove it for now. However, in the following section of this tutorial we are going to add new routes to this file, at that point you would want to add it again to concat multiple routes.</p></div>
<p>After we add the route, it will show some compilation errors, to fix that we need to add the codec to serialize/deserialize our request/response</p>
<h3><a href="#add-codecs" name="add-codecs" class="anchor"><span class="anchor-link"></span></a>Add Codecs</h3>
<p>We are using <a href="https://sirthias.github.io/borer/">borer</a> to serialize/deserialize. It has support for two formats Json and Cbor(binary format)</p>
<p>Add codecs in <code>HttpCodecs.scala</code></p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/backend/src/main/scala/org/tmt/sample/http/HttpCodecs.scala#L13-L14" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit lazy val raDecResponseCodec: Codec[RaDecResponse] = MapBasedCodecs.deriveCodec
implicit lazy val raDecRequestCodec: Codec[RaDecRequest]   = MapBasedCodecs.deriveCodec</code></pre></dd>
</dl>
<p>SampleRoute should compile now successfully and ready to use.</p>
<h3><a href="#manually-test-our-application" name="manually-test-our-application" class="anchor"><span class="anchor-link"></span></a>Manually test our application</h3>
<p>Start location service with authentication service (we will use auth in next section of tutorial)</p>
<pre class="prettyprint"><code class="language-bash">cs install csw-services:v4.0.0-M1
csw-services start -k 
</code></pre>
<p>Try running our backend application</p>
<pre class="prettyprint"><code class="language-bash">sbt:backend&gt; run start
</code></pre>
<p>If application is successfully started it, will show log with <code>server_ip</code> and <code>app_port</code> registered to location service.</p>
<p>Update <code>apptest.http</code> and test your <code>raDecValues</code> POST route</p>
<pre class="prettyprint"><code class="language-bash">#### Request to test raDecValues endpoint
POST http://&lt;server_ip&gt;:&lt;app_port&gt;/raDecValues
Content-Type: application/json

{
  &quot;raInDecimals&quot;: 2.13,
  &quot;decInDecimals&quot;: 2.18
}

</code></pre>
<p>Successful response contains the formattedRa and formattedDec value with a unique id.</p>
<pre class="prettyprint"><code class="language-bash">{
  &quot;id&quot;: &quot;80ab3f42-a4cf-4249-b9a0-2b209aab48e8&quot;,
  &quot;formattedRa&quot;: &quot;8h 8m 9.602487087684134s&quot;,
  &quot;formattedDec&quot;: &quot;124°54&#39;17.277618670114634\&quot;&quot;
}
</code></pre>
<p>Add this to your <code>apptest.http</code> and test your <code>raDecValues</code> GET route</p>
<pre class="prettyprint"><code class="language-http">####
GET http://&lt;server_ip&gt;:&lt;app_port&gt;/raDecValues
</code></pre>
<p>Successful response contains list of with formattedRa value.</p>
<pre class="prettyprint"><code class="language-bash">[
  {
    &quot;id&quot;: &quot;d6a16719-72bf-4928-8bf3-abb125186f49&quot;,
    &quot;formattedRa&quot;: &quot;8h 8m 9.602487087684134s&quot;,
    &quot;formattedDec&quot;: &quot;124°54&#39;17.277618670114634\&quot;&quot;
  }
]
</code></pre>
<h2><a href="#consume-routes-in-frontend" name="consume-routes-in-frontend" class="anchor"><span class="anchor-link"></span></a>Consume routes in frontend</h2>
<p>In this section, we will be consuming data with using our React components. We will show how to create a client side route to add/render custom components within the application.</p>
<p>First lets cleanup unwanted code</p>
<ul>
  <li>Go to <code>components/pages</code> folder in <code>src</code>, delete all component files under this directory</li>
  <li>Delete folder <code>components/form</code></li>
  <li>Go to <code>pages</code> folder in <code>test</code>, delete all test files under this directory</li>
  <li>Remove the contents of <code>api.ts</code> file</li>
</ul>
<h3><a href="#add-models" name="add-models" class="anchor"><span class="anchor-link"></span></a>Add models</h3>
<ul>
  <li>Go to <code>Models.ts</code></li>
  <li>Delete existing model interfaces Add our request and response models</li>
</ul>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/models/Models.ts#L2-L11" target="_blank" title="Go to snippet source"></a><code class="language-ts">export interface RaDecRequest {
  raInDecimals: number
  decInDecimals: number
}

export interface RaDecResponse {
  id: string
  formattedRa: string
  formattedDec: string
}</code></pre></dd>
</dl>
<h3><a href="#add-fetch" name="add-fetch" class="anchor"><span class="anchor-link"></span></a>Add Fetch</h3>
<p>Implement the following methods to consume data from our POST and GET routes in <code>api.ts</code> file.</p>
<p>For POST Route</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/utils/api.ts#L5-L14" target="_blank" title="Go to snippet source"></a><code class="language-ts">export const postRaDecValues = async (
  baseUrl: string,
  raDecRequest: RaDecRequest
): Promise&lt;RaDecResponse | undefined&gt; =&gt;
  (
    await post&lt;RaDecRequest, RaDecResponse&gt;(
      baseUrl + &#39;raDecValues&#39;,
      raDecRequest
    )
  ).parsedBody</code></pre></dd>
</dl>
<p>For GET Route</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/utils/api.ts#L35-L38" target="_blank" title="Go to snippet source"></a><code class="language-ts">export const getRaDecValues = async (
  baseUrl: string
): Promise&lt;RaDecResponse[] | undefined&gt; =&gt;
  (await get&lt;RaDecResponse[]&gt;(baseUrl + &#39;raDecValues&#39;)).parsedBody</code></pre></dd>
</dl>
<h3><a href="#add-our-react-component" name="add-our-react-component" class="anchor"><span class="anchor-link"></span></a>Add our React component</h3>
<ul>
  <li>In <code>pages</code> folder, create <code>RaDecInput.tsx</code></li>
  <li>Add a simple input form to the <code>RaDecInput</code> react component</li>
</ul>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDecInput.tsx#L10-L57" target="_blank" title="Go to snippet source"></a><code class="language-tsx">export const RaDecInput = (): JSX.Element =&gt; {
  return (
    &lt;Form
      onFinish={onFinish}
      style={{ padding: &#39;1rem&#39; }}
      wrapperCol={{
        span: 1
      }}&gt;
      &lt;Form.Item label=&#39;RaInDecimals&#39; name=&#39;raInDecimals&#39;&gt;
        &lt;Input role=&#39;RaInDecimals&#39; style={{ marginLeft: &#39;0.5rem&#39; }} /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item label=&#39;DecInDecimals&#39; name=&#39;decInDecimals&#39;&gt;
        &lt;Input role=&#39;DecInDecimals&#39; /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item&gt;
        &lt;Button type=&#39;primary&#39; htmlType=&#39;submit&#39; role=&#39;Submit&#39;&gt;
          Submit
        &lt;/Button&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  )
}</code></pre></dd>
</dl>
<p>You would require locationService instance for getting backend url. This instance is available via context named <code>LocationServiceProvider</code>. Add the following as first line inside the <code>RaDecInput</code> component.</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDecInput.tsx#L10-L12" target="_blank" title="Go to snippet source"></a><code class="language-tsx">export const RaDecInput = (): JSX.Element =&gt; {
  const locationService = useLocationService()</code></pre></dd>
</dl>
<p>Add <code>onFinish</code> handler and use <code>postRaDecValues</code> method in our component</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDecInput.tsx#L16-L34" target="_blank" title="Go to snippet source"></a><code class="language-tsx">const onFinish = async (values: RaDecRequest) =&gt; {
  const backendUrl = await getBackendUrl(locationService)
  const valueInDecimal = {
    raInDecimals: Number(values.raInDecimals),
    decInDecimals: Number(values.decInDecimals)
  }
  if (backendUrl) {
    const response = await postRaDecValues(backendUrl, valueInDecimal)
    if (response?.formattedRa &amp;&amp; response?.formattedDec) {
      console.log(response.formattedRa)
      console.log(response.formattedDec)
    } else {
      console.error(response)
      throw new Error(
        &#39;Invalid response, formattedRa or formattedDec field is missing&#39;
      )
    }
  }
}</code></pre></dd>
</dl>
<ul>
  <li>In <code>pages</code> folder ,Add new component <code>RaDecTable.tsx</code> to display ra values table</li>
</ul>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDecTable.tsx#L33-L63" target="_blank" title="Go to snippet source"></a><code class="language-tsx">export const RaDecTable = (): JSX.Element =&gt; {
  return (
    &lt;Table
      rowKey={(record) =&gt; record.id}
      pagination={false}
      dataSource={raDecValues}
      columns={columns}
      bordered
    /&gt;
  )
}</code></pre></dd>
</dl>
<p>Add columns for the table in this component</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDecTable.tsx#L11-L28" target="_blank" title="Go to snippet source"></a><code class="language-tsx">const HeaderTitle = ({ title }: { title: string }): JSX.Element =&gt; (
  &lt;Typography.Title level={5} style={{ marginBottom: 0 }}&gt;
    {title}
  &lt;/Typography.Title&gt;
)

const columns: ColumnsType&lt;RaDecResponse&gt; = [
  {
    title: &lt;HeaderTitle title={&#39;Formatted Ra Value&#39;} /&gt;,
    dataIndex: &#39;formattedRa&#39;,
    key: &#39;formattedRa&#39;
  },
  {
    title: &lt;HeaderTitle title={&#39;Formatted Dec Value&#39;} /&gt;,
    dataIndex: &#39;formattedDec&#39;,
    key: &#39;formattedDec&#39;
  }
]</code></pre></dd>
</dl>
<p>Use our <code>getRaDecValues</code> method in this component</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDecTable.tsx#L33-L63" target="_blank" title="Go to snippet source"></a><code class="language-tsx">export const RaDecTable = (): JSX.Element =&gt; {
  const locationService = useLocationService()
  const [raDecValues, setRaValues] = useState&lt;RaDecResponse[]&gt;()

  useEffect(() =&gt; {
    async function fetchRaValues() {
      const backendUrl = await getBackendUrl(locationService)
      if (backendUrl) {
        const raDecValues = await getRaDecValues(backendUrl)
        console.error(&#39;raDecValues&#39;, raDecValues)
        setRaValues(raDecValues)
      } else {
        errorMessage(&#39;Failed to fetch ra values&#39;)
      }
    }

    fetchRaValues()
  }, [])

  return (
    &lt;Table
      rowKey={(record) =&gt; record.id}
      pagination={false}
      dataSource={raDecValues}
      columns={columns}
      bordered
    /&gt;
  )
}</code></pre></dd>
</dl>
<ul>
  <li>In <code>pages</code> folder ,Add new component <code>RaDec.tsx</code> to compose above created components and display in a page</li>
</ul>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/pages/RaDec.tsx#L6-L13" target="_blank" title="Go to snippet source"></a><code class="language-tsx">export const RaDec = (): JSX.Element =&gt; {
  return (
    &lt;&gt;
      &lt;RaDecInput /&gt;
      &lt;RaDecTable /&gt;
    &lt;/&gt;
  )
}</code></pre></dd>
</dl>
<p>Next, we need to show our newly created <code>RaDec</code> component.</p>
<p>Update <code>Routes.tsx</code> file and delete references to deleted files and their routes, map our new created <code>RaDec</code> component to <code>/</code> path.</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/routes/Routes.tsx#L12" target="_blank" title="Go to snippet source"></a><code class="language-tsx">&lt;Route exact path=&#39;/&#39; component={RaDec} /&gt;</code></pre></dd>
</dl>
<p>Now, we need a link to let user navigate to <code>Ra</code> form from different parts of application.</p>
<p>Update <code>MenuBar.tsx</code> and delete existing <code>Menu</code> and its <code>Menu.Item</code>. Add our menu item.</p>
<dl>
  <dt>Typescript</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/frontend/src/components/menu/MenuBar.tsx#L18-L31" target="_blank" title="Go to snippet source"></a><code class="language-tsx">&lt;Menu mode=&#39;horizontal&#39;&gt;
  &lt;Menu.Item key=&#39;raDec&#39;&gt;
    &lt;Link to=&#39;/&#39;&gt;RaDec&lt;/Link&gt;
  &lt;/Menu.Item&gt;
&lt;/Menu&gt;</code></pre></dd>
</dl>
<p>Now, we have linked all pieces of our frontend application.</p>
<pre class="prettyprint"><code class="language-bash">$:frontend&gt; npm start
</code></pre>
<p>It will launch application in Browser with an input form.</p>
<ul>
  <li>Add a value like &lsquo;2.13&rsquo; and &lsquo;2.18&rsquo; and click submit.</li>
  <li>Refresh page</li>
  <li>You will see formatted ra and dec value in table below the input form.</li>
</ul>
<p>To build the application for its production deployment</p>
<pre class="prettyprint"><code class="language-bash">$:frontend&gt; npm run build
</code></pre>
</div>
<div>
<a href="https://github.com/tmtsoftware/esw-web-app-example/tree/master/docs/src/main/flows/base-flow.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.1.0*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../index.html" title="Web Application Tutorial" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Web Application Tutorial
</span>
</div>
</a>
<a href="../flows/auth-flow.html" title="Adding Authentication" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Adding Authentication
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
